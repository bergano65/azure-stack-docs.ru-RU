---
title: Заметки о выпуске обновления 7 для Службы приложений Azure в Azure Stack Hub
description: Узнайте о том, что находится в пакете обновления 7 для Службы приложений в Azure Stack Hub, какие есть известные проблемы и откуда скачать обновление.
author: apwestgarth
manager: stefsch
ms.topic: article
ms.date: 10/11/2019
ms.author: anwestg
ms.reviewer: ''
ms.openlocfilehash: d4ddc7d0b6190c7f855b222079f8d13cb5d6e14e
ms.sourcegitcommit: fd5d217d3a8adeec2f04b74d4728e709a4a95790
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/29/2020
ms.locfileid: "76874371"
---
# <a name="app-service-on-azure-stack-hub-update-7-release-notes"></a>Заметки о выпуске обновления 7 для Службы приложений Azure в Azure Stack Hub

В этих заметках о выпуске описаны улучшения, исправления и известные проблемы в обновлении 7 для Службы приложений Azure в Azure Stack Hub. Известные проблемы можно разделить на проблемы, которые непосредственно относятся к процессу развертывания, обновления, и проблемы со сборкой (после установки).

> [!IMPORTANT]
> Прежде чем развертывать Службу приложений Azure 1.7, примените обновление 1907 к интегрированной системе Azure Stack Hub или разверните последний Пакет средств разработки Azure Stack.


## <a name="build-reference"></a>Указание сборки

Номер сборки обновления 7 для Службы приложений Azure в Azure Stack Hub — **84.0.2.10**

### <a name="prerequisites"></a>Предварительные требования

Перед началом развертывания ознакомьтесь со статьей [Подготовка к работе со службой приложений в Azure Stack](azure-stack-app-service-before-you-get-started.md).

Прежде чем начать обновление Службы приложений Azure в Azure Stack Hub до версии 1.7, сделайте приведенные ниже действия.

- Убедитесь, что в разделе администрирования Службы приложений Azure на портале администрирования Azure Stack Hub настроены все роли.

- Выполните резервное копирование Службы приложений и баз данных master:
  - AppService_Hosting;
  - AppService_Metering;
  - master.

- Выполните резервное копирование общей папки с содержимым приложения клиента.

- Выполните синдикацию **расширения пользовательских сценариев** версии **1.9.3** из Marketplace.

### <a name="new-features-and-fixes"></a>Новые функции и исправления

Обновление 7 для Службы приложений Azure в Azure Stack Hub включает приведенные ниже улучшения и исправления.

- Устранение уязвимости, связанной с удаленным выполнением кода ([CVE-2019-1372](https://portal.msrc.microsoft.com/en-US/security-guidance/advisory/CVE-2019-1372)).

- Обновления для **клиента, администратора службы приложений, портала функций и средств Kudu**. Они согласованы с версией пакета SDK для портала Azure Stack Hub.

- Обновление **среды выполнения Функций Azure** до версии **v1.0.12582**.

- Обновления основной службы для повышения надежности и отображения сообщений об ошибках упрощают диагностику распространенных проблем.

- **Реализованы обновления следующих исполняющих сред и инструментов**:
  - ASP.NET Core 2.2.46
  - Zul OpenJDK 8.38.0.13
  - Tomcat 7.0.94
  - Tomcat 8.5.42
  - Tomcat 9.0.21
  - PHP 5.6.40
  - PHP 7.3.6
  - Обновление Kudu до версии 82.10503.3890

- **Обновления базовой операционной системы всех ролей**.
  - [Накопительное обновление для 64-разрядных систем Windows Server 2016 за август 2019 г. (KB4512495)](https://support.microsoft.com/help/4512495)

- **Ограничение доступа теперь включено на портале пользователя**:
  - В этом выпуске пользователи могут настроить ограничение доступа для веб-приложений, приложений API и приложений Функций в соответствии с опубликованной документацией по [ограничению доступа к службе приложений Azure](https://docs.microsoft.com/azure/app-service/app-service-ip-restrictions). **Примечание**. Служба приложений Azure в Azure Stack Hub пока не поддерживает конечные точки службы.

- **Восстановлена поддержка варианта развертывания (классическая модель)** .
  - Пользователи снова могут использовать вариант развертывания (классическая модель) для настройки развертывания приложений из GitHub, BitBucket, Dropbox, OneDrive, локальных и внешних репозиториев, а также для определения учетных данных развертывания для приложений.

- **Мониторинг Функций Azure** настроен правильно.

- **Поведение Центра обновления Windows**. Основываясь на отзывах пользователей, мы изменили способ настройки Центра обновления Windows в ролях Службы приложений, начиная с обновления 7:
  - Три режима:
    - **Disabled** (Отключено) — Центр обновления Windows отключен и Windows получает обновление из базы знаний, которая предоставляется со Службой приложений Azure в выпусках Azure Stack Hub;
    - **Automatic** (Автоматический) — Центр обновления Windows включен и самостоятельно определяет, как и когда выполнять обновления;
    - **Managed** (Управляемый) — Центр обновления Windows отключен и Служба приложений Azure будет выполнять цикл Центра обновления Windows в событии OnStart для отдельной роли.

  **New** (Новые развертывания) — Центр обновления Windows по умолчанию отключен.

  **Existing** (Существующие развертывания) — если вы изменили этот параметр в контроллере, значение изменится с **False** на **Disabled** и предыдущее значение **True** изменится на **Automatic**.

### <a name="post-deployment-steps"></a>Действия, выполняемые после развертывания

> [!IMPORTANT]
> Если вы указали поставщик ресурсов Службы приложений с помощью экземпляра SQL Always On, [к группе доступности необходимо добавить базы данных appservice_hosting и appservice_metering](https://docs.microsoft.com/sql/database-engine/availability-groups/windows/availability-group-add-a-database), а затем синхронизировать эти базы данных, чтобы избежать прекращения работы службы в случае отработки отказа.

### <a name="known-issues-post-installation"></a>Известные проблемы (после установки)

- Рабочим ролям не удается связаться с файловым сервером, если Служба приложений развернута в имеющейся виртуальной сети и файловый сервер доступен только в частной сети, как это описано в документации по развертыванию Службы приложений Azure в Azure Stack Hub.

Если вы решили выполнить развертывание в существующей виртуальной сети с использованием внутреннего IP-адреса для подключения к файловому серверу, необходимо добавить правило безопасности для исходящего трафика, разрешающее передачу трафика SMB между подсетью рабочей роли и файловым сервером. Для этого перейдите к группе безопасности сети WorkersNsg на портале администрирования и добавьте правило безопасности для исходящего трафика со следующими свойствами.
 * Источник: Любой
 * Диапазон исходных портов: *.
 * Назначение: IP-адреса
 * Диапазон конечных IP-адресов: диапазон IP-адресов для файлового сервера
 * Диапазон конечных портов: 445
 * Протокол: TCP
 * Действие: Allow
 * Приоритет: 700
 * Имя: Outbound_Allow_SMB445

### <a name="known-issues-for-cloud-admins-operating-azure-app-service-on-azure-stack-hub"></a>Известные проблемы, с которыми сталкиваются облачные администраторы, работающие со службой приложений Azure в Azure Stack Hub

Обратитесь к документации в статье [Обновления Azure Stack Hub: заметки о выпуске](azure-stack-release-notes-1907.md)

## <a name="next-steps"></a>Дальнейшие действия

- Общие сведения о Службе Приложений Azure в Azure Stack Hub см. в [этой статье](azure-stack-app-service-overview.md).
- Дополнительные сведения о том, как подготовиться к развертыванию Службы приложений Azure в Azure Stack Hub, см. в [этой статье](azure-stack-app-service-before-you-get-started.md).
