---
title: Общие сведения о сборе журналов диагностики Azure Stack | Документация Майкрософт
description: Описывается сбор журналов диагностики с помощью раздела "Справка и поддержка" в Azure Stack, включая сбор журналов по запросу и автоматический сбор журналов.
services: azure-stack
documentationcenter: ''
author: justinha
manager: femila
editor: ''
ms.assetid: a20bea32-3705-45e8-9168-f198cfac51af
ms.service: azure-stack
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 11/07/2019
ms.author: justinha
ms.reviewer: prchint
ms.lastreviewed: 11/07/2019
ms.openlocfilehash: 1d40c0c7884773cf1f10341a90c78531c07e13f8
ms.sourcegitcommit: 7817d61fa34ac4f6410ce6f8ac11d292e1ad807c
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/02/2019
ms.locfileid: "74690002"
---
# <a name="overview-of-azure-stack-diagnostic-log-collection"></a>Общие сведения о сборе журналов диагностики Azure Stack 

*Область применения: интегрированные системы Azure Stack*

Azure Stack — это большая коллекция компонентов, взаимодействующих между собой. Все эти компоненты создают свои собственные уникальные журналы. Это может усложнить диагностику проблем, особенно в случае с ошибками, поступающими из нескольких взаимодействующих компонентов Azure Stack. Для решения этой задачи мы разработали функцию сбора журналов диагностики. 

До выпуска 1907 для диагностики использовался командлет [Test-AzureStack](azure-stack-diagnostic-test.md), который проверяет работоспособность системы, а также [привилегированная конечная точка (PEP)](azure-stack-configure-on-demand-diagnostic-log-collection.md#use-the-privileged-endpoint-pep-to-collect-diagnostic-logs), которая собирает журналы для устранения неполадок. 

Начиная с выпуска 1907, на страницу **Справка и поддержка** добавлена функция **Сбор журналов диагностики**. 
Функция **сбора журналов диагностики** является результатом наших текущих усилий, прилагаемых для расширения возможностей оператора Azure Stack по устранению неполадок. С помощью этих улучшений операторы могут быстро собирать журналы диагностики и предоставлять их службе поддержки пользователей Майкрософт (CSS). Журналы могут храниться в контейнере больших двоичных объектов в Azure, доступ к которому можно настроить согласно своим требованиям.    
   
**Сбор журналов диагностики** осуществляется двумя разными способами:

- **Automatic collection** (Автоматический сбор). Если этот параметр включен (рекомендуется), то сбор журналов автоматически активируется определенными оповещениями о работоспособности, после чего журналы сохраняются в вашей учетной записи хранения Azure.
- **Collect logs now** (Собрать журналы сейчас). Это параметр сбора по запросу, позволяющий выбрать журналы, указав скользящее окно в 1–4 часа за последние семь дней.

![Снимок экрана параметров сбора журналов диагностики](media/azure-stack-automatic-log-collection/azure-stack-log-collection-overview.png)

Функция **сбора журналов диагностики** обладает простым пользовательским интерфейсом и не требует установки PowerShell. Сбор журналов надежен и не прерывается, даже если службы инфраструктуры не работают.
Если ваша политика позволяет отправлять журналы диагностики службе поддержки пользователей, то рекомендуется использовать функцию **сбора журналов диагностики**, начиная с выпуска 1907. Использовать [PEP](azure-stack-configure-on-demand-diagnostic-log-collection.md#use-the-privileged-endpoint-pep-to-collect-diagnostic-logs) для сбора журналов следует только в том случае, если функция **сбора журналов диагностики** в разделе "Справка и поддержка" недоступна.

## <a name="automatic-diagnostic-log-collection"></a>Автоматический сбор журналов диагностики 

При возникновении [определенных оповещений о работоспособности](azure-stack-configure-automatic-diagnostic-log-collection.md#automatic-diagnostic-log-collection-alerts) функция автоматического сбора журналов диагностики упреждающе передает журналы диагностики из Azure Stack в большой двоичный объект хранилища в Azure, значительно уменьшая время, необходимое для отправки журналов диагностики в службу поддержки пользователей. Журналы диагностики собираются только при возникновении оповещения.  

Дополнительные сведения об автоматическом сборе журналов см. в разделе [Настройка автоматического сбора журналов диагностики Azure Stack](azure-stack-configure-automatic-diagnostic-log-collection.md).

## <a name="on-demand-diagnostic-log-collection"></a>Сбор журналов диагностики по запросу

При сборе по запросу журналы диагностики передаются из Azure Stack в большой двоичный объект хранилища в Azure, когда оператор Azure Stack вручную активирует сбор.
Служба поддержки пользователей предоставит подписанный URL-адрес (SAS) своего большого двоичного объекта хранилища. Оператор Azure Stack может щелкнуть **Collect logs now** (Собрать журналы сейчас) и ввести подписанный URL-адрес. После этого журналы диагностики будут переданы непосредственно в большой двоичный объект службы поддержки пользователей без каких-либо промежуточных действий по передаче. 

Дополнительные сведения о сборе журналов по запросу см. в разделе [Немедленный сбор журналов диагностики Azure Stack](azure-stack-configure-on-demand-diagnostic-log-collection.md).

## <a name="bandwidth-considerations"></a>Рекомендации по пропускной способности

Средний размер коллекции журналов диагностики зависит от того, собрана ли она по запросу или автоматически. Средний размер собранной автоматически коллекции журналов составляет около 2 ГБ, тогда как размер коллекции журналов, собранной по запросу, зависит от количества часов, за которые собраны журналы. 

В следующей таблице приведены рекомендации для сред с ограниченными или лимитными подключениями к Azure.

| Сетевое подключение | Влияние |
|--------------------|--------|
| Подключение с низкой пропускной способностью и высокой задержкой | Передача журнала займет продолжительное время. | 
| Общее подключение | Передача может также повлиять на работу других приложений и пользователей, совместно использующих сетевое подключение. |
| Лимитное подключение | Поставщик услуг Интернета может взимать дополнительную плату за дополнительное использование сети. |

Дополнительные сведения см. в разделе [Рекомендации по автоматическому сбору журналов Azure Stack](azure-stack-best-practices-automatic-diagnostic-log-collection.md).

## <a name="see-also"></a>См. также

[Обработка журнала Azure Stack и данных клиента](https://docs.microsoft.com/azure-stack/operator/azure-stack-data-collection)

[Использование подписанных URL-адресов (SAS)](https://docs.microsoft.com/azure/storage/common/storage-dotnet-shared-access-signature-part-1)

[Рекомендации по автоматическому сбору журналов Azure Stack](azure-stack-best-practices-automatic-diagnostic-log-collection.md)
