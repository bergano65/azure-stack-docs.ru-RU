---
title: Серверы размещения MySQL в Azure Stack | Документы Майкрософт
description: Добавление экземпляров MySQL для подготовки через поставщик ресурсов адаптера MySQL
services: azure-stack
documentationCenter: ''
author: mattbriggs
manager: femila
editor: ''
ms.service: azure-stack
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/23/2019
ms.author: mabrigg
ms.reviewer: xiaofmao
ms.lastreviewed: 02/28/2019
ms.openlocfilehash: 4af1f2b163d2ae8eec952b451f21ea88b63e15d1
ms.sourcegitcommit: b95983e6e954e772ca5267304cfe6a0dab1cfcab
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/23/2019
ms.locfileid: "68417644"
---
# <a name="add-hosting-servers-for-the-mysql-resource-provider"></a>Добавление серверов размещения для поставщика ресурсов MySQL

Вы можете разместить экземпляр сервера размещения MySQL на виртуальной машине в [Azure Stack](azure-stack-overview.md) или на виртуальной машине за пределами среды Azure Stack при условии, что поставщик ресурсов MySQL может подключаться к этому экземпляру.

> [!NOTE]
> Поставщик ресурсов MySQL необходимо создать в подписке поставщика по умолчанию, а серверы размещения MySQL — в оплачиваемых пользовательских подписках. Сервер поставщика ресурсов не следует использовать для размещения баз данных пользователя.

Для серверов размещения можно использовать версии MySQL 5.6, 5.7 и 8.0. Поставщик ресурсов MySQL не поддерживает проверку подлинности caching_sha2_password. Она будет добавлена в следующем выпуске. Серверы MySQL 8.0 должны быть настроены для использования mysql_native_password. Также поддерживается MariaDB.

## <a name="connect-to-a-mysql-hosting-server"></a>Подключение к серверу размещения MySQL

Убедитесь, что у вас есть учетные данные для учетной записи с правами системного администратора. Чтобы добавить сервер размещения, выполните следующие действия.

1. Войдите на портал оператора Azure Stack в качестве администратора служб.
2. Выбор пункта **Все службы**.
3. В категории **ADMINISTRATIVE RESOURCES** (Административные ресурсы) выберите **MySQL Hosting Servers** >  **+Add** (Серверы размещения MySQL > +Добавить). Откроется диалоговое окно **Add a MySQL Hosting Server** (Добавить сервер размещения MySQL), показанное на следующем снимке экрана.

   ![Настройка сервера размещения](./media/azure-stack-mysql-rp-deploy/mysql-add-hosting-server-2.png)

4. Введите сведения о подключении своего экземпляра MySQL Server.

   * В поле **MySQL Hosting Server Name** (Имя сервера размещения MySQL) укажите полное доменное имя (FQDN) или допустимый IPv4-адрес. Не используйте короткое имя виртуальной машины.
   * По умолчанию образы Bitnami MySQL, доступные в Azure Stack Marketplace, имеют **имя администратора** *root*. 
   * Если вы не знаете **пароль** учетной записи root, ознакомьтесь с [документацией Bitnami](https://docs.bitnami.com/azure/faq/#how-to-find-application-credentials), чтобы узнать, как получить его. 
   * Экземпляр MySQL по умолчанию отсутствует, поэтому необходимо указать значение в поле **Size of Hosting Server in GB** (Размер сервера размещения в ГБ). Значение должно быть близким к емкости сервера базы данных.
   * В поле **Подписка** оставьте значение по умолчанию.
   * В разделе **Группа ресурсов** можно создать новую группу или использовать имеющуюся.

   > [!NOTE]
   > Если экземпляр MySQL может быть доступен Azure Resource Manager клиента и администратора, его можно передать под контроль поставщика ресурсов. Но экземпляр MySQL **должен** быть выделен исключительно для поставщика ресурсов.

5. Выберите **Номера SKU**, чтобы открыть диалоговое окно **Создание номера SKU**.

   ![Создание SKU MySQL](./media/azure-stack-mysql-rp-deploy/mysql-new-sku.png)

   **Имя** номера SKU должно отражать свойства номера SKU, чтобы пользователи могли развертывать базы данных на соответствующий номер SKU.

6. Нажмите кнопку **ОК**, чтобы создать номер SKU.
   > [!NOTE]
   > Отображение номеров SKU на портале может занять до часа. Вы не можете создать базу данных до развертывания и запуска SKU.

7. В разделе **Добавить сервер размещения MySQL** нажмите кнопку **Создать**.

При добавлении серверов их необходимо назначать новым или имеющимся номерам SKU для дифференциации предложений служб. Например, в организации может существовать корпоративный экземпляр MySQL для поддержки объемных резервных копий баз данных и автоматических резервных копий. Этот высокопроизводительный сервер можно зарезервировать для разных отделов в вашей организации.

## <a name="security-considerations-for-mysql"></a>Вопросы безопасности для MySQL

Следующие сведения применимы к поставщикам ресурсов и серверам размещения MySQL:

* Убедитесь, что все серверы размещения настроены для обмена данными через TLS 1.2. См. раздел [Настройка MySQL для использования зашифрованных соединений](https://dev.mysql.com/doc/refman/5.7/en/using-encrypted-connections.html).
* Используйте [прозрачное шифрование данных](https://dev.mysql.com/doc/mysql-secure-deployment-guide/5.7/en/secure-deployment-data-encryption.html).
* Поставщик ресурсов MySQL не поддерживает проверку подлинности caching_sha2_password.

## <a name="increase-backend-database-capacity"></a>Увеличение емкости серверной базы данных

Чтобы увеличить емкость серверной базы данных, разверните дополнительные серверы MySQL на портале Azure Stack. Добавьте эти серверы в новый или существующий номер SKU. При добавлении сервера в существующий номер SKU характеристики сервера должны совпадать с характеристиками других серверов в номере SKU.

## <a name="sku-notes"></a>Примечания номеров SKU
Используйте имя номера SKU, которое описывает возможности серверов в номере SKU, такие как емкость и производительность. Имя предоставляет возможность пользователям развернуть свои базы данных в соответствующем номере SKU. Например, имена номеров SKU можно использовать для дифференциации предложений служб по следующим характеристикам:
  
* Большая емкость
* Высокая производительность
* Высокая доступность

Как показала лучшая методика, все серверы размещения в номере SKU должны иметь одинаковые ресурсы и характеристики производительности.

Номера SKU невозможно назначать определенным пользователям или группам.

Чтобы изменить номер SKU, перейдите к разделу **Все службы** > **MySQL Adapter** (Адаптер MySQL)  > **Номера SKU**. Выберите номер SKU, который нужно изменить, внесите необходимые изменения и нажмите кнопку **Сохранить** для сохранения изменений. 

Чтобы удалить ненужный номер SKU, перейдите к разделу **Все службы** > **MySQL Adapter** (Адаптер MySQL)  > **Номера SKU**. Щелкните правой кнопкой мыши имя номера SKU и выберите **Удалить** для его удаления.

> [!IMPORTANT]
> Отображение новых номеров SKU на пользовательском портале может занять до одного часа.

## <a name="make-mysql-database-servers-available-to-your-users"></a>Предоставление пользователям доступа к серверам баз данных MySQL

Создайте планы и предложения, чтобы сделать серверы баз данных MySQL доступными для пользователей. Добавьте службу Microsoft.SqlAdapter в план и создайте квоту. MySQL не разрешает ограничивать размер баз данных.

> [!IMPORTANT]
> Отображение новых квот на пользовательском портале или применение измененных квот может занять до двух часов.

## <a name="next-steps"></a>Дополнительная информация

[Создание базы данных MySQL](azure-stack-mysql-resource-provider-databases.md)
