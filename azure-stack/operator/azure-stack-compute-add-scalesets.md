---
title: Обеспечение доступности масштабируемых наборов виртуальных машин в Azure Stack Hub
description: Из этой статьи вы узнаете, как оператор облака может добавить масштабируемый набор виртуальных машин в Azure Stack Hub Marketplace.
author: sethmanheim
ms.topic: article
ms.date: 01/22/2020
ms.author: sethm
ms.reviewer: kivenkat
ms.lastreviewed: 10/22/2019
ms.openlocfilehash: f0b23df25ef2e9fffe9c5f43ee649ecfe5f74092
ms.sourcegitcommit: 4ac711ec37c6653c71b126d09c1f93ec4215a489
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/27/2020
ms.locfileid: "77695297"
---
# <a name="make-virtual-machine-scale-sets-available-in-azure-stack-hub"></a>Обеспечение доступности масштабируемых наборов виртуальных машин в Azure Stack Hub

Масштабируемые наборы виртуальных машин представляют собой вычислительный ресурс Azure Stack Hub. С помощью масштабируемых наборов можно развернуть ряд идентичных виртуальных машин и управлять им. При одинаковой настройке всех виртуальных машин их предварительная подготовка для использования масштабируемого набора не требуется. Это упрощает создание крупномасштабных служб, предназначенных для больших вычислений, больших данных и контейнерных рабочих нагрузок.

В этой статье объясняется, как обеспечить доступность масштабируемых наборов в Azure Stack Hub Marketplace. После завершения этой процедуры пользователи смогут добавлять масштабируемые наборы виртуальных машин в свои подписки.

Масштабируемые наборы виртуальных машин в Azure Stack Hub подобны масштабируемым наборам виртуальных машин в Azure. Дополнительные сведения см. в следующих видеороликах.

* [Марк Руссинович (Mark Russinovich) рассказывает о масштабируемых наборах Azure.](https://channel9.msdn.com/Blogs/Regular-IT-Guy/Mark-Russinovich-Talks-Azure-Scale-Sets/)
* [Масштабируемые наборы виртуальных машин с Гаем Бауэрманом (Guy Bowerman)](https://channel9.msdn.com/Shows/Cloud+Cover/Episode-191-Virtual-Machine-Scale-Sets-with-Guy-Bowerman)

В Azure Stack Hub масштабируемые наборы виртуальных машин не поддерживают автоматическое масштабирование. В масштабируемый набор можно добавить дополнительные экземпляры с помощью портала, шаблонов Resource Manager или PowerShell.

## <a name="prerequisites"></a>Предварительные требования

* **Azure Stack Hub Marketplace.** Зарегистрируйте Azure Stack Hub в глобальной среде Azure, чтобы элементы стали доступны в Azure Stack Hub Marketplace. См. инструкции по [регистрации Azure Stack Hub в Azure](azure-stack-registration.md).
* **Образ операционной системы**. Прежде чем создавать масштабируемый набор виртуальных машин, скачайте из [Azure Stack Hub Marketplace](azure-stack-download-azure-marketplace-item.md) образы виртуальных машин для использования в масштабируемом наборе. Образы уже должны присутствовать, прежде чем пользователь сможет создать новый масштабируемый набор.

## <a name="use-the-azure-stack-hub-portal"></a>Использование портала Azure Stack Hub

>[!IMPORTANT]  
> Сведения этого раздела применимы при использовании Azure Stack Hub версии 1808 и выше.

1. Войдите на портал Azure Stack Hub. Выберите **Все службы**, **Масштабируемые наборы виртуальных машин** и затем в разделе **Вычисления** выберите **Масштабируемые наборы виртуальных машин**.
   ![Выбор наборов для масштабирования виртуальных машин](media/azure-stack-compute-add-scalesets/all-services.png)

2. Выберите ***Создать масштабируемые наборы виртуальных машин***.
   ![Создание масштабируемого набора виртуальных машин](media/azure-stack-compute-add-scalesets/create-scale-set.png)

3. Заполните пустые поля, выберите из раскрывающихся списков **Образ диска операционной системы**, **Подписка**, и **Размер экземпляра**. Выберите **Да** для **Использование управляемых дисков**. Затем нажмите кнопку **Создать**.
    ![Настройка и создание масштабируемых наборов виртуальных машин](media/azure-stack-compute-add-scalesets/create.png)

4. Чтобы просмотреть новый масштабируемый набор виртуальных машин, щелкните **Все ресурсы**, а затем найдите и щелкните в результатах поиска имя виртуальной машины.
   ![Просмотр масштабируемого набора виртуальных машин](media/azure-stack-compute-add-scalesets/search.png)

## <a name="update-images-in-a-virtual-machine-scale-set"></a>Обновление образов в масштабируемом наборе виртуальных машин

После создания масштабируемого набора виртуальных машин пользователи смогут обновлять образы в этом наборе, не создавая набор масштабирования заново. Процесс обновления образа будет разным в следующих сценариях.

1. В шаблоне развертывания для масштабируемого набора виртуальных машин указано значение **latest** для параметра **version**.  

   Если параметр `version` в разделе шаблона `imageReference` для масштабируемого набора имеет значение **latest**, при увеличении масштаба в масштабируемом наборе всегда будет применяться последняя из доступных версий. Кода увеличение масштаба в наборе завершится, вы можете удалить старые экземпляры из масштабируемого набора виртуальных машин. Значения параметров `publisher`, `offer` и `sku` сохраняются неизменными.

   В следующем примере JSON показано `latest`:  

    ```json  
    "imageReference": {
        "publisher": "[parameters('osImagePublisher')]",
        "offer": "[parameters('osImageOffer')]",
        "sku": "[parameters('osImageSku')]",
        "version": "latest"
        }
    ```

2. В шаблоне масштабируемого набора виртуальных машин для параметра **version** указано не значение **latest**, а конкретный номер версии.  

    Если оператор Azure Stack Hub скачает образ более новой версии (и удалит более старую версию), увеличить масштаб для этого масштабируемого набора будет нельзя. Это сделано намеренно, так как указанная в шаблоне версия образа должна быть всегда доступна.  

Дополнительные сведения см. в разделе [Диски и образы операционной системы](../user/azure-stack-compute-overview.md#operating-system-disks-and-images).  

## <a name="scale-a-virtual-machine-scale-set"></a>Масштабирование масштабируемого набора виртуальных машин

Вы можете масштабировать масштабируемого набора виртуальных машин, изменяя его размер.

1. На портале выберите ваш масштабируемый набор, а затем выберите **Масштабирование**.

2. С помощью ползунка установите новый уровень масштабирования для этого масштабируемого набора виртуальных машин, а затем щелкните **Сохранить**.

     ![Масштабирование набора виртуальных машин](media/azure-stack-compute-add-scalesets/scale.png)

## <a name="next-steps"></a>Дальнейшие действия

* [Скачивание элементов Marketplace из Azure в Azure Stack Hub](azure-stack-download-azure-marketplace-item.md)
