---
title: Действия с узлами единицы масштабирования в Azure Stack | Документация Майкрософт
description: Узнайте, как просмотреть состояние узла и выполнить действия включения и отключения питания, выключения и возобновления в интегрированной системе Azure Stack.
services: azure-stack
documentationcenter: ''
author: mattbriggs
manager: femila
editor: ''
ms.service: azure-stack
ms.workload: na
pms.tgt_pltfrm: na
ms.devlang: PowerShell
ms.topic: article
ms.date: 07/18/2019
ms.author: mabrigg
ms.reviewer: thoroet
ms.lastreviewed: 07/18/2019
ms.openlocfilehash: b75d9f37e2b2deacb5935bb6cda3c2586afb8baa
ms.sourcegitcommit: 314fd74caf356b157583d38d2b8b1dee30408b7d
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/03/2019
ms.locfileid: "70235016"
---
# <a name="scale-unit-node-actions-in-azure-stack"></a>Действия с узлами единицы масштабирования в Azure Stack

*Область применения: интегрированные системы Azure Stack*

В этой статье описывается, как просмотреть состояние единицы масштабирования. Вы можете просматривать узлы отдельной единицы. С узлами можно выполняться такие действия, как включение и отключение питания, выключение, очистка, возобновление и восстановление. Обычно эти действия с узлами выполняются при оперативной замене компонентов или для восстановления работоспособности узла.

> [!Important]  
> Все действия с узлами, описанные в этой статье, следует одновременно выполнять только с одним целевым узлом.

## <a name="view-the-node-status"></a>Просмотр состояния узла

На портале администратора можно узнать состояние любой единицы масштабирования и связанных с ней узлов.

Чтобы просмотреть состояние единицы масштабирования и ее узлов, сделайте следующее:

1. На плитке **Управление регионами** выберите нужный регион.
2. В левой части экрана в разделе **Ресурсы инфраструктуры** выберите **Единицы масштабирования**.
3. В списке результатов выберите нужную единицу масштабирования.
4. Слева в разделе **Общие** выберите **Узлы**.

   Отобразятся следующие данные.

   - Список отдельных узлов
   - Состояние работоспособности (см. список ниже)
   - Состояние питания ("Работает" или "Остановлено")
   - Модель сервера
   - IP-адрес контроллера управления основной платой (BMC);
   - общее число ядер;
   - Общий объем памяти

![Состояние единицы масштабирования](media/azure-stack-node-actions/multinodeactions.png)

### <a name="node-operational-states"></a>Состояния работоспособности узлов

| Status | ОПИСАНИЕ |
|----------------------|-------------------------------------------------------------------|
| Выполнение | Узел активно участвует в единице масштабирования. |
| Остановлено | Узел недоступен. |
| Добавление | Узел активно добавляется в единицу масштабирования. |
| Восстановление | Восстановление узла активно выполняется. |
| Обслуживание, | Узел приостановлен, и нет запущенных активных пользовательских рабочих нагрузок. |
| Требуется исправление | Обнаружена ошибка, требующая восстановления узла. |

## <a name="scale-unit-node-actions"></a>Действия для узла единицы масштабирования

Просматривая сведения об узле единицы масштабирования, вы также можете выполнять некоторые действия, например:
 - Запуск и остановка (в зависимости от текущего состояния питания)
 - Отключение и возобновление (в зависимости от состояния работоспособности)
 - Восстановление
 - Shutdown

Доступные действия зависят от текущего рабочего состояния узла.

Необходимо установить модули PowerShell для Azure Stack. Эти командлеты находятся в модуле **Azs.Fabric.Admin**. Инструкции по установке или проверке установки PowerShell для Azure Stack см. в разделе [Установка PowerShell для Azure Stack](azure-stack-powershell-install.md).

## <a name="stop"></a>Остановить

Действие **остановки** приводит к отключению узла. Результат аналогичен нажатию на кнопку питания. Это действие не отправляет операционной системе сигнал завершения работы. В случае плановой остановки в первую очередь попробуйте выполнить операцию выключения. 

Это действие обычно используется для узлов в зависшем состоянии, которые не отвечают на запросы.

Чтобы выполнить действие остановки, откройте командную строку PowerShell с повышенными привилегиями и выполните следующий командлет.

```powershell  
  Stop-AzsScaleUnitNode -Location <RegionName> -Name <NodeName>
```

Если вдруг действие остановки не сработает, попробуйте выполнить эту операцию еще раз, а если снова не получится, воспользуйтесь вместо этого веб-интерфейсом BMC.

Дополнительные сведения см. в разделе [Stop-AzsScaleUnitNode](https://docs.microsoft.com/powershell/module/azs.fabric.admin/stop-azsscaleunitnode).

## <a name="start"></a>Начало

Действие **запуска** приводит к включению узла. Результат аналогичен нажатию на кнопку питания. 
 
Чтобы выполнить действие запуска, откройте командную строку PowerShell с повышенными привилегиями и выполните следующий командлет.

```powershell  
  Start-AzsScaleUnitNode -Location <RegionName> -Name <NodeName>
```

Если вдруг действие запуска не сработает, попробуйте выполнить эту операцию еще раз, а если снова не получится, воспользуйтесь вместо этого веб-интерфейсом BMC.

Дополнительные сведения см. в разделе [Start-AzsScaleUnitNode](https://docs.microsoft.com/powershell/module/azs.fabric.admin/start-azsscaleunitnode).

## <a name="drain"></a>Остановка

Действие **очистки** перемещает все активные рабочие нагрузки в другие узлы той же самой единицы масштабирования.

Обычно это действие используется во время оперативной замены компонентов, например при замене целого узла.

> [!Important]
> Операцию очистки узла выполняйте только в период планового технического обслуживания, предварительно уведомив пользователей. В некоторых ситуациях остановка может привести к перебоям в работе активных рабочих нагрузок.

Чтобы выполнить действие очистки, откройте командную строку PowerShell с повышенными привилегиями и выполните следующий командлет.

```powershell  
  Disable-AzsScaleUnitNode -Location <RegionName> -Name <NodeName>
```

Дополнительные сведения см. в разделе [Disable-AzsScaleUnitNode](https://docs.microsoft.com/powershell/module/azs.fabric.admin/disable-azsscaleunitnode).

## <a name="resume"></a>Продолжить

Действие **возобновления** приводит к повторному включению остановленного узла и устанавливает для него статус готовности к размещению рабочих нагрузок. Для рабочих нагрузок, которые работали на узле до его остановки, восстановление размещения не выполняется. (Для проведения очистки узел необходимо выключить. При последующем включении узла он не будет отмечен как активный для размещения рабочих нагрузок. Следует использовать действие возобновления, чтобы отметить узел как активный, когда вы будете к этому готовы.)

Чтобы выполнить действие возобновления, откройте командную строку PowerShell с повышенными привилегиями и выполните следующий командлет.

```powershell  
  Enable-AzsScaleUnitNode -Location <RegionName> -Name <NodeName>
```

Дополнительные сведения см. в разделе [Enable-AzsScaleUnitNode](https://docs.microsoft.com/powershell/module/azs.fabric.admin/enable-azsscaleunitnode).

## <a name="repair"></a>Восстановление

> [!CAUTION]  
> Согласование встроенного ПО является критически важным для успешного выполнения операции, описанной в этой статье. Если данный шаг пропустить, это может привести к нестабильной работе системы, снижению производительности, нарушениям безопасности или может помешать Azure Stack автоматизировать развертывание операционной системы. При замене оборудования всегда следует обращаться к документации вашего партнера, предоставляющего оборудование, чтобы гарантировать, что применяемое встроенное ПО соответствует версии OEM, отображаемой на [портале администрирования Azure Stack](azure-stack-updates.md).<br>
Дополнительные сведения и ссылки на документацию партнеров доступны в разделе [Замена компонента оборудования на узле единицы масштабирования Azure Stack](azure-stack-replace-component.md).

| Партнер по оборудованию | Регион | URL-адрес |
|------------------|--------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Cisco | Все | [Руководство по эксплуатации интегрированной системы Cisco для Microsoft Azure Stack](https://www.cisco.com/c/en/us/td/docs/unified_computing/ucs/azure-stack/b_Azure_Stack_Operations_Guide_4-0/b_Azure_Stack_Operations_Guide_4-0_chapter_00.html#concept_wks_t1q_wbb)<br><br>[Заметки о выпуске интегрированной системы Cisco для Microsoft Azure Stack](https://www.cisco.com/c/en/us/support/servers-unified-computing/ucs-c-series-rack-mount-ucs-managed-server-software/products-release-notes-list.html) |
| Dell EMC | Все | [Облако для Microsoft Azure Stack 14G (требуется учетная запись и имя для входа)](https://support.emc.com/downloads/44615_Cloud-for-Microsoft-Azure-Stack-14G)<br><br>[Облако для Microsoft Azure Stack 13G (требуется учетная запись и имя для входа)](https://support.emc.com/downloads/42238_Cloud-for-Microsoft-Azure-Stack-13G) |
| Fujitsu | Япония | [Служба технической поддержки Fujitsu (требуется учетная запись и имя для входа)](https://eservice.fujitsu.com/supportdesk-web/) |
|  | Европа, Ближний Восток и Африка | [Fujitsu: поддержка продуктов и систем ИТ](https://support.ts.fujitsu.com/IndexContact.asp?lng=COM&ln=no&LC=del) |
|  |  | [Сайт MySupport Fujitsu (требуется учетная запись и имя для входа)](https://support.ts.fujitsu.com/IndexMySupport.asp) |
| HPE | Все | [HPE ProLiant для Microsoft Azure Stack](http://www.hpe.com/info/MASupdates) |
| Lenovo | Все | [Лучшие рецепты для ThinkAgile SXM](https://datacentersupport.lenovo.com/us/en/solutions/ht505122) |

Действие **восстановления** восстанавливает узел. Его следует применять только в следующих сценариях:
 - При полной замене узла (с заменой дисков данных или без нее).
 - После сбоя и последующей замены компонента оборудования (если такая рекомендация есть в документации по этому оборудованию — легкозаменяемой детали).

> [!Important]  
> Конкретные действия, которые нужно выполнять при замене узла или отдельных компонентов оборудования, вы найдете в соответствующей документации, предоставляемой поставщиком оборудования OEM. В этой документации указывается, нужно ли выполнять восстановление после замены аппаратных компонентов. 

В ходе восстановления необходимо указать IP-адрес контроллера BMC. 

Чтобы выполнить действие восстановления, откройте командную строку PowerShell с повышенными привилегиями и выполните следующий командлет.

  ```powershell
  Repair-AzsScaleUnitNode -Location <RegionName> -Name <NodeName> -BMCIPv4Address <BMCIPv4Address>
  ```

## <a name="shutdown"></a>Shutdown

Действие **Завершение работы** перемещает все активные рабочие нагрузки в другие узлы той же самой единицы масштабирования. Затем действие завершает работу узла единицы масштабирования должным образом.

После повторного запуска узла вам нужно запустить действие [Возобновить](#resume). Для рабочих нагрузок, которые работали на узле до его остановки, восстановление размещения не выполняется.

Если не удается выполнить операцию завершения работы, попытайтесь запустить операцию [Слив](#drain) с помощью последующего выполнения операции завершения работы.

Чтобы выполнить действие выключения, откройте командную строку PowerShell с повышенными привилегиями и выполните следующий командлет.

  ```powershell
  Stop-AzsScaleUnitNode -Location <RegionName> -Name <NodeName> -Shutdown
  ```



## <a name="next-steps"></a>Дополнительная информация

Дополнительные сведения о модуле для администраторов Fabric в Azure Stack см. [здесь](https://docs.microsoft.com/powershell/module/azs.fabric.admin/?view=azurestackps-1.6.0).
