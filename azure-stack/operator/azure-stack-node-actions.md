---
title: Действия с узлами единицы масштабирования в Azure Stack Hub | Документация Майкрософт
description: Сведения о действиях узла единицы масштабирования, в том числе включение, выключение питания, отключение, возобновление и просмотр состояния узла в интегрированных системах Azure Stack Hub.
services: azure-stack
documentationcenter: ''
author: mattbriggs
manager: femila
editor: ''
ms.service: azure-stack
ms.workload: na
pms.tgt_pltfrm: na
ms.devlang: PowerShell
ms.topic: article
ms.date: 11/11/2019
ms.author: mabrigg
ms.reviewer: thoroet
ms.lastreviewed: 11/11/2019
ms.openlocfilehash: de0ec0d68b3d63cc0661fe7c4684304d83878a45
ms.sourcegitcommit: d450dcf5ab9e2b22b8145319dca7098065af563b
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/11/2020
ms.locfileid: "75882357"
---
# <a name="scale-unit-node-actions-in-azure-stack-hub"></a>Действия с узлами единицы масштабирования в Azure Stack Hub

В этой статье описывается, как просмотреть состояние единицы масштабирования. Вы можете просматривать узлы отдельной единицы. С узлами можно выполняться такие действия, как включение и отключение питания, выключение, очистка, возобновление и восстановление. Обычно эти действия с узлами выполняются при оперативной замене компонентов или для восстановления работоспособности узла.

> [!Important]  
> Все действия с узлами, описанные в этой статье, следует одновременно выполнять только с одним целевым узлом.

## <a name="view-the-node-status"></a>Просмотр состояния узла

На портале администратора можно узнать состояние любой единицы масштабирования и связанных с ней узлов.

Чтобы просмотреть состояние единицы масштабирования и ее узлов, сделайте следующее:

1. На плитке **Управление регионами** выберите нужный регион.
2. В левой части экрана в разделе **Ресурсы инфраструктуры** выберите **Единицы масштабирования**.
3. В списке результатов выберите нужную единицу масштабирования.
4. Слева в разделе **Общие** выберите **Узлы**.

   Отобразятся следующие данные.

   - Список отдельных узлов.
   - Состояние работоспособности (см. список ниже).
   - Состояние питания ("Работает" или "Остановлено").
   - Модель сервера.
   - IP-адрес контроллера управления основной платой (BMC).
   - Общее число ядер.
   - Общий объем памяти.

![Состояние единицы масштабирования](media/azure-stack-node-actions/multinodeactions.png)

### <a name="node-operational-states"></a>Состояния работоспособности узлов

| Состояние | Description |
|----------------------|-------------------------------------------------------------------|
| Запущен | Узел активно участвует в единице масштабирования. |
| Остановлена | Узел недоступен. |
| Добавление | Узел активно добавляется в единицу масштабирования. |
| Восстановление | Восстановление узла активно выполняется. |
| Обслуживание | Узел приостановлен, и нет запущенных активных пользовательских рабочих нагрузок. |
| Требуется исправление | Обнаружена ошибка, требующая восстановления узла. |

## <a name="scale-unit-node-actions"></a>Действия для узла единицы масштабирования

Просматривая сведения об узле единицы масштабирования, вы также можете выполнять некоторые действия, например:

 - Запуск и остановка (в зависимости от текущего состояния питания).
 - Отключение и возобновление (в зависимости от состояния работоспособности).
 - Восстановление.
 - Завершение работы.

Доступные действия зависят от текущего рабочего состояния узла.

Необходимо установить модули PowerShell для Azure Stack Hub. Эти командлеты находятся в модуле **Azs.Fabric.Admin**. Инструкции по установке или проверке установки PowerShell для Azure Stack Hub см. в разделе [Установка PowerShell для Azure Stack Hub](azure-stack-powershell-install.md).

## <a name="stop"></a>Остановить

Действие **остановки** приводит к отключению узла. Это то же самое, что и нажатие кнопки питания. Это действие не отправляет операционной системе сигнал завершения работы. В случае плановой остановки в первую очередь попробуйте выполнить операцию выключения.

Это действие обычно используется для узлов в зависшем состоянии, которые не отвечают на запросы.

Чтобы выполнить действие остановки, откройте командную строку PowerShell с повышенными привилегиями и выполните следующий командлет.

```powershell  
  Stop-AzsScaleUnitNode -Location <RegionName> -Name <NodeName>
```

Если вдруг действие остановки не сработает, попробуйте выполнить эту операцию еще раз, а если снова не получится, воспользуйтесь вместо этого веб-интерфейсом BMC.

Дополнительные сведения см. в разделе [Stop-AzsScaleUnitNode](https://docs.microsoft.com/powershell/module/azs.fabric.admin/stop-azsscaleunitnode).

## <a name="start"></a>Запуск

Действие **запуска** приводит к включению узла. Результат аналогичен нажатию на кнопку питания.

Чтобы выполнить действие запуска, откройте командную строку PowerShell с повышенными привилегиями и выполните следующий командлет.

```powershell  
  Start-AzsScaleUnitNode -Location <RegionName> -Name <NodeName>
```

В маловероятном случае, если действие запуска не работает, повторите операцию. Если оно не сработает второй раз, используйте вместо него веб-интерфейс BMC.

Дополнительные сведения см. в разделе [Start-AzsScaleUnitNode](https://docs.microsoft.com/powershell/module/azs.fabric.admin/start-azsscaleunitnode).

## <a name="drain"></a>Остановка

Действие **очистки** перемещает все активные рабочие нагрузки в другие узлы той же самой единицы масштабирования.

Обычно это действие используется во время оперативной замены компонентов, например при замене целого узла.

> [!Important]
> Операцию очистки узла выполняйте только в период планового технического обслуживания, предварительно уведомив пользователей. В некоторых ситуациях остановка может привести к перебоям в работе активных рабочих нагрузок.

Чтобы выполнить действие очистки, откройте командную строку PowerShell с повышенными привилегиями и выполните следующий командлет.

```powershell  
  Disable-AzsScaleUnitNode -Location <RegionName> -Name <NodeName>
```

Дополнительные сведения см. в разделе [Disable-AzsScaleUnitNode](https://docs.microsoft.com/powershell/module/azs.fabric.admin/disable-azsscaleunitnode).

## <a name="resume"></a>Продолжить

Действие **возобновления** приводит к повторному включению остановленного узла и устанавливает для него статус готовности к размещению рабочих нагрузок. Для рабочих нагрузок, которые работали на узле до его остановки, восстановление размещения не выполняется. (Для проведения очистки узел необходимо выключить. При последующем включении узла он не будет отмечен как активный для размещения рабочих нагрузок. Следует использовать действие возобновления, чтобы отметить узел как активный, когда вы будете к этому готовы.)

Чтобы выполнить действие возобновления, откройте командную строку PowerShell с повышенными привилегиями и выполните следующий командлет.

```powershell  
  Enable-AzsScaleUnitNode -Location <RegionName> -Name <NodeName>
```

Дополнительные сведения см. в разделе [Enable-AzsScaleUnitNode](https://docs.microsoft.com/powershell/module/azs.fabric.admin/enable-azsscaleunitnode).

## <a name="repair"></a>Восстановление

> [!CAUTION]  
> Согласование встроенного ПО является критически важным для успешного выполнения операции, описанной в этой статье. Пропуск этого шага может привести к нестабильной работе системы, снижению производительности, потокам безопасности или сбою, когда автоматизация Azure Stack Hub развертывает операционную систему. При замене оборудования всегда следует обращаться к документации вашего партнера, предоставляющего оборудование, чтобы гарантировать, что применяемое встроенное ПО соответствует версии OEM, отображаемой на [портале администрирования Azure Stack Hub](azure-stack-updates.md).<br><br>
Дополнительные сведения и ссылки на документацию партнеров доступны в разделе [Замена компонента оборудования на узле единицы масштабирования Azure Stack](azure-stack-replace-component.md).

| Партнер по оборудованию | Регион | URL-адрес |
|------------------|--------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Cisco | All | [Руководство по эксплуатации интегрированной системы Cisco для Microsoft Azure Stack Hub](https://www.cisco.com/c/en/us/td/docs/unified_computing/ucs/azure-stack/b_Azure_Stack_Operations_Guide_4-0/b_Azure_Stack_Operations_Guide_4-0_chapter_00.html#concept_wks_t1q_wbb)<br><br>[Заметки о выпуске интегрированной системы Cisco для Microsoft Azure Stack Hub](https://www.cisco.com/c/en/us/support/servers-unified-computing/ucs-c-series-rack-mount-ucs-managed-server-software/products-release-notes-list.html) |
| Dell EMC | All | [Облако для Microsoft Azure Stack Hub 14G (требуется учетная запись и имя для входа)](https://support.emc.com/downloads/44615_Cloud-for-Microsoft-Azure-Stack-14G)<br><br>[Облако для Microsoft Azure Stack Hub 13G (требуется учетная запись и имя для входа)](https://support.emc.com/downloads/42238_Cloud-for-Microsoft-Azure-Stack-13G) |
| Fujitsu | Япония | [Служба технической поддержки Fujitsu (требуется учетная запись и имя для входа)](https://eservice.fujitsu.com/supportdesk-web/) |
|  | Европа, Ближний Восток и Африка | [Fujitsu: поддержка продуктов и систем ИТ](https://support.ts.fujitsu.com/IndexContact.asp?lng=COM&ln=no&LC=del) |
|  |  | [Сайт MySupport Fujitsu (требуется учетная запись и имя для входа)](https://support.ts.fujitsu.com/IndexMySupport.asp) |
| HPE | All | [HPE ProLiant для Microsoft Azure Stack Hub](http://www.hpe.com/info/MASupdates) |
| Lenovo | All | [Лучшие рецепты для ThinkAgile SXM](https://datacentersupport.lenovo.com/us/en/solutions/ht505122) |

Действие **восстановления** восстанавливает узел. Его следует применять только в следующих сценариях:

- При полной замене узла (с заменой дисков данных или без нее).
- После сбоя и последующей замены компонента оборудования (если такая рекомендация есть в документации по этому оборудованию — легкозаменяемой детали).

> [!Important]  
> Конкретные действия, которые нужно выполнять при замене узла или отдельных компонентов оборудования, вы найдете в соответствующей документации, предоставляемой поставщиком оборудования OEM. В этой документации указывается, нужно ли выполнять восстановление после замены аппаратных компонентов.

В ходе восстановления необходимо указать IP-адрес контроллера BMC.

Чтобы выполнить действие восстановления, откройте командную строку PowerShell с повышенными привилегиями и выполните следующий командлет.

  ```powershell
  Repair-AzsScaleUnitNode -Location <RegionName> -Name <NodeName> -BMCIPv4Address <BMCIPv4Address>
  ```

## <a name="shutdown"></a>Shutdown

Действие **Завершение работы** перемещает все активные рабочие нагрузки в другие узлы той же самой единицы масштабирования. Затем действие завершает работу узла единицы масштабирования должным образом.

После повторного запуска узла вам нужно запустить действие [Возобновить](#resume). Для рабочих нагрузок, которые работали на узле до его остановки, восстановление размещения не выполняется.

Если не удается выполнить операцию завершения работы, попытайтесь запустить операцию [Слив](#drain) с помощью последующего выполнения операции завершения работы.

Чтобы выполнить действие выключения, откройте командную строку PowerShell с повышенными привилегиями и выполните следующий командлет.

  ```powershell
  Stop-AzsScaleUnitNode -Location <RegionName> -Name <NodeName> -Shutdown
  ```

## <a name="next-steps"></a>Дальнейшие действия

[Сведения о модуле оператора Azure Stack Hub Fabric](https://docs.microsoft.com/powershell/module/azs.fabric.admin/?view=azurestackps-1.6.0).