---
title: Создание предложения услуги для пользователей
titleSuffix: Azure Stack Hub
description: Узнайте, как создать предложение услуги в Azure Stack Hub, используя предложения, планы и службы.
author: BryanLa
ms.author: bryanla
ms.topic: tutorial
ms.date: 10/16/2019
ms.reviewer: shriramnat
ms.lastreviewed: 10/16/2019
ms.openlocfilehash: 3d05ff70909508701db2f4770ecb3efb9d860a6d
ms.sourcegitcommit: 4ac711ec37c6653c71b126d09c1f93ec4215a489
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/27/2020
ms.locfileid: "77694549"
---
# <a name="create-a-service-offering-for-users-in-azure-stack-hub"></a>Создание предложения услуги для пользователей в Azure Stack Hub

В этом руководстве показано, как создать предложение. Предложение предоставляет пользователям доступ к службам в режиме подписки. Оформив подписку на предложение, пользователь получает право создавать и развертывать ресурсы в службах, которые указаны в этом предложении.

В этом руководстве описано следующее:

> [!div class="checklist"]
> * Создайте предложение.
> * Создание плана.
> * Назначение служб и квот для плана.
> * Назначение плана для предложения.

## <a name="overview"></a>Обзор

Предложение состоит из одного или нескольких планов. В рамках плана предоставляется доступ к одной или нескольким службам, а также определяется поставщик ресурсов и квота для каждой службы. Планы можно добавить в предложение в виде базового плана или дополнительного плана, расширяющего это предложение. Дополнительные сведения см. в обзорной статье [о службах, планах, предложениях и подписках](service-plan-offer-subscription-overview.md).

![Подписки, предложения и планы в Azure Stack Hub](media/azure-stack-key-features/image4.png)

### <a name="resource-providers"></a>Поставщики ресурсов

Поставщик ресурсов поддерживает создание, развертывание и администрирование ресурсов в виде служб. Типичным примером можно считать поставщик ресурсов Microsoft.Compute, который позволяет создавать и развертывать виртуальные машины. Подробный обзор модели управления ресурсами Azure см. в статье об [Azure Resource Manager](/azure/azure-resource-manager/resource-group-overview).

В Azure Stack Hub есть две общие категории поставщиков ресурсов: одни развертывают ресурсы в виде основных служб, а другие — в виде дополнительных.

### <a name="foundational-services"></a>Базовые службы

>[!NOTE]
> Из этого руководства вы узнаете, как создать предложение на основе базовых служб. 

Базовые службы поддерживаются следующими поставщиками ресурсов, которые доступны по умолчанию в каждой установке Azure Stack Hub:

| Поставщик ресурсов | Примеры ресурсов |
| ----------------- | ------------------|
| Microsoft.Compute; | Виртуальные машины, диски, масштабируемые наборы виртуальных машин |
| Microsoft.KeyVault | Хранилища ключей, секреты |
| Microsoft.Network. | Виртуальные сети, общедоступные IP-адреса, подсистемы балансировки нагрузки |
| Microsoft.Storage; | Учетные записи хранения, большие двоичные объекты, очереди, таблицы |

### <a name="value-add-services"></a>Дополнительные службы

>[!NOTE]
> Чтобы предоставлять дополнительные службы, необходимо сначала установить соответствующий поставщик ресурсов в Azure Stack Hub Marketplace. После установки его ресурсы предоставляются пользователям так же, как и базовые службы. Актуальный набор поставщиков ресурсов, которые предоставляют дополнительные предложения услуг, см. в разделе с **практическими руководствами**.

Дополнительные службы поддерживаются поставщиками ресурсов, которые установлены после развертывания Azure Stack Hub. Примеры приведены ниже.

| Поставщик ресурсов | Примеры ресурсов |
| ----------------- | ------------------------- |
| Microsoft.Web | Приложения-функции Службы приложений, веб-приложения, приложения API | 
| Microsoft.MySqlAdapter | Сервер размещения MySQL, база данных MySQL | 
| Microsoft.SqlAdapter | Сервер размещения SQL Server, база данных SQL Server |

::: moniker range=">=azs-1902"

## <a name="create-an-offer"></a>Создание предложения

В процессе создания предложения вы создадите само предложение и план для него. Этот план используется в качестве базового плана предложения. При создании плана вы указываете службы, которые будут доступны в рамках этого плана, и соответствующие квоты.

1. Войдите на портал администрирования с учетной записью администратора облака.

    - В интегрированной системе формат URL-адреса зависит от региона оператора и внешнего доменного имени. Поддерживается следующий формат: `https://adminportal.<region>.<FQDN>`.
    - Если вы используете Пакет средств разработки Azure Stack, то URL-адрес имеет вид `https://adminportal.local.azurestack.external`.

    Теперь выберите **+Создать ресурс** > **Предложения и планы** > **Предложение**.

    ![Новое предложение на портале администрирования Azure Stack Hub](media/tutorial-offer-services/1-create-resource-offer.png)

1. В окне **Создать предложение** откройте вкладку **Основные сведения**, заполните поля **Отображаемое имя** и **Имя ресурса**, а затем выберите или создайте новую группу ресурсов в разделе **Группа ресурсов**. Отображаемое имя — это понятное имя предложения. Только оператор облака может видеть имя ресурса, которое администраторы используют для работы с предложением в качестве ресурса Azure Resource Manager.

   ![Отображаемое имя на портале администрирования Azure Stack Hub](media/tutorial-offer-services/2-create-new-offer.png)

1. Выберите вкладку **Базовые планы** и щелкните **Создать новый план**. Этот план будет сразу добавлен в предложение в качестве базового плана.

   ![Добавление предложения на портале администрирования Azure Stack Hub](media/tutorial-offer-services/3-create-new-offer-base-plans.png)

1. В окне **Создать план** откройте вкладку **Основные сведения** и заполните поля **Отображаемое имя** и **Имя ресурса**. Отображаемое имя — это понятное имя плана, которое отображается для пользователей. Только оператор облака может видеть имя ресурса, которое операторы облака используют для работы с планом в качестве ресурса Azure Resource Manager. **Группа ресурсов** будет выбрана та, которая указана для предложения.

   ![Отображаемое имя плана на портале администрирования Azure Stack Hub](media/tutorial-offer-services/4-create-new-plan-basics.png)

1. Выберите вкладку **Службы**, где вы увидите список служб, доступных через установленные поставщики ресурсов. Выберите **Microsoft.Compute**, **Microsoft.Network** и **Microsoft.Storage**.

   ![Службы плана на портале администрирования Azure Stack Hub](media/tutorial-offer-services/5-create-new-plan-services.png)

1. Выберите вкладку **Квоты**, где вы увидите список служб, включенных для этого плана. Щелкните **Создать** и определите настраиваемую квоту для **Microsoft.Compute**. Параметр **Имя** для квоты является обязательным, и вы можете изменить или подтвердить все параметры этой квоты. Щелкните **ОК**, когда все будет готово, а затем повторите эти шаги для остальных служб.

   ![Создание квоты вычислений на портале администрирования Azure Stack Hub](media/tutorial-offer-services/6-create-new-plan-quotas.png)

1. Перейдите на вкладку **Review + create** (Просмотр и создание). Вы увидите вверху зеленый баннер "Проверка пройдена", что указывает на готовность к созданию нового базового плана. Нажмите кнопку **создания**. Вы также увидите уведомление о том, что план создан.

   ![Создание плана на портале администрирования Azure Stack Hub](media/tutorial-offer-services/7-create-new-plan-review-create.png)

1. Вернувшись в область **Базовые планы** на странице **Создать предложение**, вы увидите там новый созданный план. Не забудьте выбрать этот план для включения в предложение в качестве базового плана, а затем щелкните **Проверить и создать**.

   ![Добавление базового плана на портале администрирования Azure Stack Hub](media/tutorial-offer-services/8-create-new-offer-base-plans-done.png)

1. На странице **Проверить и создать** вы увидите вверху зеленый баннер "Проверка пройдена". Проверьте информацию в разделах "Основные сведения" и "Базовые планы", а затем щелкните **Создать**.

   ![Создание предложения на портале администрирования Azure Stack Hub](media/tutorial-offer-services/9-create-new-offer-review-create.png)

1. Сначала отобразится страница "Развертывание выполняется", а после завершения процесса — страница "Развертывание выполнено". Щелкните имя предложения в столбце **Ресурс**.

   ![Развертывание предложения на портале администрирования Azure Stack Hub](media/tutorial-offer-services/10-offer-deployment-complete.png)

1. На баннере указано, что предложение пока остается закрытым, то есть пользователи не могут подписываться на него. Щелкните **Изменить состояние** и выберите **Общедоступно**, чтобы исправить это.

    ![Общедоступное состояние на портале администрирования Azure Stack Hub](media/tutorial-offer-services/11-offer-change-state.png)

::: moniker-end

::: moniker range="<=azs-1901"

## <a name="create-an-offer-1901-and-earlier"></a>Создание предложения (1901 и более ранние версии)

В процессе создания предложения вы создадите само предложение и план для него. Этот план используется в качестве базового плана предложения. При создании плана вы указываете службы, которые будут доступны в рамках этого плана, и соответствующие квоты.

1. Войдите на портал администрирования с учетной записью администратора облака.

    - В интегрированной системе формат URL-адреса зависит от региона оператора и внешнего доменного имени: `https://adminportal.<region>.<FQDN>`.
    - Если вы используете Пакет средств разработки Azure Stack, то URL-адрес имеет вид <https://adminportal.local.azurestack.external>.

    Теперь выберите **+Создать ресурс** > **Предложения и планы** > **Предложение**.

    ![Новое предложение на портале администрирования Azure Stack Hub](media/tutorial-offer-services/image01.png)

1. В разделе **Новое предложение** заполните поля **Отображаемое имя** и **Имя ресурса**, а затем выберите новую или имеющуюся **группу ресурсов**. Отображаемое имя — это понятное имя предложения. Только оператор облака может видеть имя ресурса, которое администраторы используют для работы с предложением в качестве ресурса Azure Resource Manager.

   ![Отображаемое имя на портале администрирования Azure Stack Hub](media/tutorial-offer-services/image02.png)

1. Выберите **Базовые планы**, а затем в разделе **План** щелкните **Добавить**, чтобы добавить новый план в предложение.

   ![Добавление предложения на портале администрирования Azure Stack Hub](media/tutorial-offer-services/image03.png)

1. В колонке **Создать план** заполните поля **Отображаемое имя** и **Имя ресурса**. Отображаемое имя — это понятное имя плана, которое отображается для пользователей. Только оператор облака может видеть имя ресурса, которое операторы облака используют для работы с планом в качестве ресурса Azure Resource Manager.

   ![Отображаемое имя плана на портале администрирования Azure Stack Hub](media/tutorial-offer-services/image04.png)

1. Выберите **Службы**. В списке служб выберите **Microsoft.Compute**, **Microsoft.Network** и **Microsoft.Storage**. Щелкните **Выбрать**, чтобы добавить эти службы в план.

   ![Службы плана на портале администрирования Azure Stack Hub](media/tutorial-offer-services/image05.png)

1. Щелкните **Квоты** и выберите первую службу, для которой вы хотите создать квоту. Ниже представлен пример для квоты IaaS, который поможет вам настроить квоты для служб вычисления, сети и хранилища.

    - Сначала создайте квоту для службы вычислений. В списке пространств имен выберите **Microsoft.Compute** и щелкните **Создать квоту**.
    
      ![Создание квоты](media/tutorial-offer-services/image06.png)

   - В области **Создание квоты** введите имя новой квоты. Также вы можете изменить или подтвердить все представленные параметры. В нашем примере сохранены все значения умолчанию. Завершив ввод, щелкните **ОК**.
   
      ![Имя квоты](media/tutorial-offer-services/image07.png)
       
    - Выберите **Microsoft.Compute** в списке пространств имен, а затем выберите созданную квоту. Это действие связывает квоту со службой вычислений.
    
      ![Выбор квоты](media/tutorial-offer-services/image08.png)
        
        Повторите эти шаги для службы сети и службы хранилища. Когда закончите, щелкните **ОК** в разделе **Квоты**, чтобы сохранить все созданные квоты.

1. В области **Новый план** также щелкните **ОК**.

1. В разделе **План** выберите созданный план и щелкните **Выбрать**.

1. В области **Новое предложение** выберите **Создать**. Вы увидите уведомление о создании предложения.

1. В меню панели мониторинга щелкните **Предложения** и выберите созданное предложение.

1. Щелкните **Изменить состояние** и выберите вариант **Общедоступно**.

    ![Общедоступное состояние](media/tutorial-offer-services/image09.png)

::: moniker-end
 
## <a name="next-steps"></a>Дальнейшие действия

Из этого руководства вы узнали, как выполнять такие задачи:

> [!div class="checklist"]
> * Создайте предложение.
> * Создание плана.
> * Назначение служб и квот для плана.
> * Назначение плана для предложения.

Перейдите к следующему руководству, чтобы изучить дальнейшие действия:
> [!div class="nextstepaction"]
> [Тестирование служб, предлагаемых в этом руководстве](tutorial-test-offer.md)
