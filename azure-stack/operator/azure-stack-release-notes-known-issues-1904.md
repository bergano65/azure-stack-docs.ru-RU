---
title: Известные проблемы в Azure Stack 1904 | Документация Майкрософт
description: Узнайте об известных неполадках в Azure Stack версии 1904.
services: azure-stack
documentationcenter: ''
author: sethmanheim
manager: femila
editor: ''
ms.assetid: ''
ms.service: azure-stack
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/31/2019
ms.author: sethm
ms.reviewer: hectorl
ms.lastreviewed: 05/31/2019
ms.openlocfilehash: 3a92a142181b9e2268948d430b0a62d6ffa189d8
ms.sourcegitcommit: 90ed5aa051d0756b2432c8aca0e2232c8ec493a4
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/16/2019
ms.locfileid: "68239450"
---
# <a name="azure-stack-1904-known-issues"></a>Известные неполадки в Azure Stack версии 1904

В этой статье перечислены известные неполадки в Azure Stack версии 1904. По мере обнаружения новых неполадок список будет обновляется.

> [!IMPORTANT]  
> Перед установкой обновления просмотрите этот раздел.

## <a name="update-process"></a>Процесс обновления

- Применимо. Данная проблема касается всех поддерживаемых выпусков.
- Причина. При попытке установить обновление Azure Stack может произойти сбой состояния обновления, после чего его состояние изменится на **PreparationFailed**. Причина этого в том, что поставщику ресурсов обновления (URP) не удается правильно передать файлы из контейнера хранилища в общую папку во внутренней инфраструктуре для обработки.
- Исправление. Начиная с версии 1901 (1.1901.0.95) эту проблему можно обойти, еще раз щелкнув **Обновить сейчас** (а не **Возобновить**). URP очистит файлы предыдущей попытки и снова начнет скачивание.
- Периодичность. Common

## <a name="portal"></a>Портал

### <a name="administrative-subscriptions"></a>Административные подписки

- Применимо. Данная проблема касается всех поддерживаемых выпусков.
- Причина. Два типа административных подписок, которые были добавлены в версии 1804, использовать не рекомендуется. К ним относятся подписки **измерения** и **потребления**.
- Исправление. Если в этих двух подписках у вас выполняются ресурсы, повторно создайте их в подписках пользователей.
- Периодичность. Common

### <a name="subscription-resources"></a>Ресурсы подписки

- Применимо. Данная проблема касается всех поддерживаемых выпусков.
- Причина. Удаление подписки пользователя приводит к появлению потерянных ресурсов.
- Исправление. Сначала следует удалить ресурсы пользователя или всю группу ресурсов и лишь затем удалять подписки пользователя.
- Периодичность. Common

### <a name="subscription-permissions"></a>Права доступа к подпискам

- Применимо. Данная проблема касается всех поддерживаемых выпусков.
- Причина. Вы не можете просматривать разрешения для подписки на порталах Azure Stack.
- Исправление. Используйте [PowerShell чтобы проверить разрешения](/powershell/module/azurerm.resources/get-azurermroleassignment).
- Периодичность. Common

### <a name="docker-extension"></a>Расширение Docker

- Применимо. Данная проблема касается всех поддерживаемых выпусков.
- Причина. На порталах администратора и пользователя при поиске по ключевому слову **Docker** элемент возвращается неправильно. Он недоступен в Azure Stack. При попытке его создания появится ошибка.
- Исправление. Без решения.
- Периодичность. Common

### <a name="marketplace-management"></a>Управление Marketplace

- Применимо. Эта проблема появилась в выпуске 1904.
- Причина. При входе на портал администратора экран управления Marketplace не отображается.
- Исправление. Обновите приложение браузера.
- Периодичность. Периодически

### <a name="marketplace-management"></a>Управление Marketplace

- Применимо. Эта проблема встречается в выпуске 1904.
- Причина. При фильтрации результатов в колонке **добавления из Azure** на вкладке интерфейса управления Marketplace на портале администратора могут отображаться неправильные отфильтрованные результаты.
- Исправление. Отсортируйте результаты по столбцу "Имя", и появятся правильные результаты.
- Периодичность. Периодически

### <a name="marketplace-management"></a>Управление Marketplace

- Применимо. Эта проблема встречается в выпуске 1904.
- Причина. При фильтрации результатов в интерфейсе управления Marketplace на портале администратора отображаются повторяющиеся имена издателя в соответствующем раскрывающемся списке. 
- Исправление. Выберите все дубликаты, чтобы получить правильный список всех продуктов Marketplace от этого издателя.
- Периодичность. Периодически

### <a name="docker-extension"></a>Расширение Docker

- Применимо. Данная проблема касается всех поддерживаемых выпусков.
- Причина. На порталах администратора и пользователя при поиске по ключевому слову **Docker** элемент возвращается неправильно. Он недоступен в Azure Stack. При попытке его создания появится ошибка.
- Исправление. Без решения.
- Периодичность. Common

### <a name="upload-blob"></a>Отправка большого двоичного объекта

- Применимо. Данная проблема касается всех поддерживаемых выпусков.
- Причина. Если на пользовательском портале попытаться отправить большой двоичный объект с помощью варианта OAuth (предварительная версия), задача завершается сбоем с сообщением об ошибке.
- Исправление. Отправка созданного большого двоичного объекта с помощью параметра SAS.
- Периодичность. Common

### <a name="template"></a>Шаблон

- Применимо. Данная проблема касается всех поддерживаемых выпусков.
- Причина. На пользовательском портале в пользовательском интерфейсе развертывания шаблона не заполняются параметры для шаблонов, имена которых начинаются с "_" (символ подчеркивания).
- Исправление. Удалите "_" (символ подчеркивания) из имени шаблона.
- Периодичность. Common

## <a name="networking"></a>Сеть

### <a name="load-balancer"></a>Подсистема балансировки нагрузки

#### <a name="add-backend-pool"></a>Добавление внутреннего пула

- Применимо. Данная проблема касается всех поддерживаемых выпусков.
- Причина. При попытке добавить **Серверный пул** к **Load Balancer** на пользовательском портале произойдет сбой операции и появится сообщение об ошибке **Не удалось обновить Load Balancer**.
- Исправление. Чтобы связать серверный пул с ресурсом подсистемы балансировки нагрузки, используйте PowerShell, CLI или шаблон Azure Resource Manager.
- Периодичность. Common

#### <a name="create-inbound-nat"></a>Создание NAT для входящего трафика

- Применимо. Данная проблема касается всех поддерживаемых выпусков.
- Причина. При попытке создать **Правило NAT для входящего трафика** для **Load Balancer** на пользовательском портале произойдет сбой операции и появится сообщение об ошибке **Не удалось обновить Load Balancer**.
- Исправление. Чтобы связать серверный пул с ресурсом подсистемы балансировки нагрузки, используйте PowerShell, CLI или шаблон Azure Resource Manager.
- Периодичность. Common

#### <a name="create-load-balancer"></a>Создание подсистемы балансировки нагрузки

- Применимо. Данная проблема касается всех поддерживаемых выпусков.
- Причина. На портале пользователя в окне **Создание подсистемы балансировки нагрузки** отображается параметр для создания номера SKU **Стандартный** для подсистемы балансировки нагрузки. Этот параметр в Azure Stack не поддерживается.
- Исправление. Вместо этого следует использовать параметры подсистемы балансировки нагрузки уровня "Базовый".
- Периодичность. Common

#### <a name="public-ip-address"></a>Общедоступный IP-адрес

- Применимо. Данная проблема касается всех поддерживаемых выпусков.
- Причина. На пользовательском портале в окне **Создать общедоступный IP-адрес** отображается параметр, используемый для создания номера SKU **Стандартный**. Номер SKU **Стандартный** не поддерживается в Azure Stack.
- Исправление. Вместо него для общедоступного IP-адреса следует использовать номер SKU уровня **Базовый**.
- Периодичность. Common

## <a name="compute"></a>Службы вычислений

### <a name="vm-boot-diagnostics"></a>Диагностика загрузки виртуальной машины

- Применимо. Данная проблема касается всех поддерживаемых выпусков.
- Причина. При создании новой виртуальной машины Windows (VM) может отображаться следующая ошибка. **Не удалось запустить виртуальную машину "vm-name". Ошибка: Не удалось обновить последовательные выходные параметры для виртуальной машины "vm-name"** .
Ошибка возникает, если вы включаете диагностику загрузки на виртуальной машине, но удаляете свою учетную запись хранения диагностики загрузки.
- Исправление. Повторно создайте учетную запись хранения с именем, используемым ранее.
- Периодичность. Common

### <a name="virtual-machine-scale-set"></a>Набор масштабирования виртуальных машин

#### <a name="centos"></a>CentOS

- Применимо. Данная проблема касается всех поддерживаемых выпусков.
- Причина. В интерфейсе создания масштабируемого набора виртуальных машин как вариант для развертывания предлагается образ на основе CentOS 7.2. Образ CentOS 7.2 недоступен в Azure Stack Marketplace, что приведет к ошибкам развертывания с сообщением о том, что образ не найден.
- Исправление. Выберите другую операционную систему для развертывания или используйте шаблон Azure Resource Manager, указав другой образ CentOS, скачанный оператором для развертывания из Marketplace.
- Периодичность. Common

#### <a name="remove-scale-set"></a>Удаление масштабируемого набора

- Применимо. Данная проблема касается всех поддерживаемых выпусков.
- Причина. Масштабируемый набор невозможно удалить в колонке **Масштабируемые наборы виртуальных машин**.
- Исправление. Выберите масштабируемый набор, который необходимо удалить, затем нажмите кнопку **Удалить** на панели **Обзор**.
- Периодичность. Common

#### <a name="create-failures-during-patch-and-update-on-4-node-azure-stack-environments"></a>Возникновение сбоев во время исправления и обновления в средах Azure Stack с четырьмя узлами

- Применимо. Данная проблема касается всех поддерживаемых выпусков.
- Причина. Создание виртуальных машин в группе доступности, состоящей из трех доменов сбоя, и создание экземпляра масштабируемого набора виртуальных машин завершается сбоем с ошибкой **FabricVmPlacementErrorUnsupportedFaultDomainSize** во время процесса обновления в среде Azure Stack, состоящей из четырех узлов.
- Исправление. Вы можете создать отдельные виртуальные машины в группе доступности с двумя доменами сбоя. Но вы по-прежнему не можете создать экземпляр масштабируемого набора во время обновления среды Azure Stack, состоящей из четырех узлов.

### <a name="ubuntu-ssh-access"></a>Доступ к Ubuntu по протоколу SSH

- Применимо. Данная проблема касается всех поддерживаемых выпусков.
- Причина. Виртуальная машина Ubuntu 18.04, созданная с включенной авторизацией SSH, не позволяет использовать ключи SSH для входа.
- Исправление. Используйте расширение доступа к виртуальной машине для Linux для реализации ключей SSH после подготовки или проверку подлинности на основе пароля.
- Периодичность. Common

### <a name="compute-host-agent-alert"></a>Оповещение, касающееся агента размещения службы вычислений

- Применимо. Эта проблема появилась в выпуске 1904.
- Причина. Оповещение, касающееся **агента размещения службы вычислений**, появляется после перезагрузки узла в единице масштабирования. Перезапуск изменяет тип запуска по умолчанию для службы агента узла службы вычислений. Это предупреждение выглядит примерно так:

   ```shell
   NAME  
   Compute Host Agent is not responding to calls.
   SEVERITY  
   Warning
   STATE  
   Active
   CREATED TIME  
   5/16/2019, 10:08:23 AM
   UPDATED TIME  
   5/22/2019, 12:27:27 PM
   COMPONENT  
   M#####-NODE02
   DESCRIPTION  
   Could not communicate with the Compute Host Agent running on node: M#####-NODE02
   REMEDIATION  
   Please disable Compute Host Agent feature flag and collect logs for further diagnosis.
   ```

- Исправление.
  - Это предупреждение можно проигнорировать. Агент не отвечает и не влияет на оператор, а также операции или приложения пользователя. Это предупреждение повторно появится через 24 часа, если его закрыть вручную.
  - Эта проблема решена в последней версии [исправления Azure Stack для версии 1904](https://support.microsoft.com/help/4505688).
- Периодичность. Common

### <a name="virtual-machine-scale-set-instance-view"></a>Представление экземпляра масштабируемого набора виртуальных машин

- Применимо. Эта проблема касается выпусков 1904 и 1905.
- Причина. Не удается загрузить колонку представления экземпляра масштабируемого набора расположена на портале Azure Stack (**Панель мониторинга** > **Масштабируемые наборы виртуальных машин** > **AnyScaleSet — Экземпляры** > **AnyScaleSetInstance**).
- Исправление. Сейчас исправления нет, но мы работаем над этим. Чтобы получить представление экземпляра масштабируемого набора виртуальных машин, пока используйте командлет CLI `az vmss get-instance-view`.

### <a name="user-image-service"></a>Служба пользовательских образов
- Применимо. Данная проблема касается всех поддерживаемых выпусков.
- Причина. Сбой при создании пользовательского образа приведет к неработоспособному состоянию службы пользовательских образов. Операции создания и удаления пользовательских образов начнут завершаться сбоем. Удаление пользовательского образа может завершиться ошибкой: "Ошибка: Произошла внутренняя ошибка управления диском."
- Исправление. Без решения. Отправьте запрос в службу поддержки Майкрософт.

## <a name="storage"></a>Хранилище

- Применимо. Данная проблема касается всех поддерживаемых выпусков.
- Причина. Выполнение [ConvertTo-AzureRmVMManagedDisk](/powershell/module/azurerm.compute/convertto-azurermvmmanageddisk) не поддерживается в Azure Stack и приводит к созданию диска с идентификатором **$null**. Это препятствует выполнению на виртуальной машине таких операций, как запуск и остановка. Диск не отображается ни в пользовательском интерфейсе, ни через API. На этом этапе исправить виртуальную машину нельзя. Ее нужно удалить.
- Исправление. Чтобы правильно преобразовать диски, см. руководство по [преобразованию в управляемые диски](../user/azure-stack-managed-disk-considerations.md#convert-to-managed-disks).

## <a name="app-service"></a>Служба приложений

- Прежде чем создавать первую функцию Azure в подписке, арендатору нужно зарегистрировать поставщик ресурсов хранилища.
- Некоторые возможности пользовательского интерфейса на портале пользователя недоступны из-за несовместимости с платформой портала версии 1903. В основном это касается элементов пользовательского интерфейса для слотов развертывания, тестирования в рабочей среде и расширений сайтов. Чтобы устранить эту проблему, используйте [модуль PowerShell Службы приложений Azure](/azure/app-service/deploy-staging-slots#automate-with-powershell) или [Azure CLI](/cli/azure/webapp/deployment/slot?view=azure-cli-latest). Интерфейс портала будет восстановлен путем обновления развертывания [Службы приложений Azure в Azure Stack до версии 1.6 (обновление 6)](azure-stack-app-service-release-notes-update-six.md).

<!-- ## Storage -->
<!-- ## SQL and MySQL-->
<!-- ## Usage -->
<!-- ### Identity -->
<!-- ### Marketplace -->

## <a name="next-steps"></a>Дополнительная информация

- [Контрольный список действий по обновлению Azure Stack](azure-stack-release-notes-checklist.md)
- [Azure Stack security updates](azure-stack-release-notes-security-updates-1904.md) (Обновления безопасности Azure Stack)
