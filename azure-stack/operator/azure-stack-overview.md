---
title: Обзор Azure Stack Hub | Документация Майкрософт
description: Общие сведения об Azure Stack Hub и о том, как это решение позволяет запускать службы Azure в центре обработки данных.
services: azure-stack
documentationcenter: ''
author: justinha
manager: femila
editor: ''
ms.assetid: ''
ms.service: azure-stack
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: overview
ms.date: 09/16/2019
ms.author: justinha
ms.reviewer: unknown
ms.custom: ''
ms.lastreviewed: 05/14/2019
ms.openlocfilehash: 9461b7c306eac0c2a1467378a49d4e91e234a629
ms.sourcegitcommit: 5ef433aa6b75cdfb557fab0ef9308ff2118e66e5
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/05/2019
ms.locfileid: "73595420"
---
# <a name="azure-stack-hub-overview"></a>Обзор Azure Stack Hub

Azure Stack Hub — это расширение Azure, которое позволяет запускать приложения в локальной среде и предоставлять службы Azure в центре обработки данных. Единообразная облачная платформа позволяет организациям уверенно принимать технологические решения на основе бизнес-требований, не позволяя технологическим ограничениям влиять на бизнес-решения.

## <a name="why-use-azure-stack-hub-"></a>В чем преимущества Azure Stack Hub?

Azure предоставляет полнофункциональную платформу для разработчиков, позволяющую создавать современные приложения. К сожалению, при работе некоторых облачных приложениях возникают определенные проблемы, например задержки, прерывание связи или несоответствие требованиям. Azure в сочетании с Azure Stack Hub позволяет реализовать следующие новые гибридные сценарии для клиентских и внутренних бизнес-приложений:

- **Пограничные и отключенные решения.** Обеспечьте соблюдение требований к задержкам и стабильности подключения, локально обрабатывая данные в Azure Stack Hub и передавая их в Azure для аналитической обработки, применяя общую логику приложения в обоих средах. Вы можете развернуть Azure Stack Hub даже без подключения к Интернету и к Azure. Например, это удобно в фабричных цехах, на круизных лайнерах и в шахтах.

- **Облачные приложения, соответствующие различным нормам**. Разрабатывайте и развертывайте приложения в Azure, сохраняя широкие возможности при локальном развертывании в Azure Stack Hub для соблюдения всех требований политик и норм. Изменения кода не требуются. Примерами могут служить приложения глобального аудита, финансовой отчетности, валютной торговли, интернет-игр и отчетов о расходах.

- **Локальная облачная модель приложения**. Используйте веб-службы Azure, контейнеры, бессерверные архитектуры и микрослужбы для обновления и расширения существующих приложений, а также для создания новых. Соблюдайте согласованность процессов DevOps в облачной среде Azure и в локальном Azure Stack Hub, чтобы ускорить модернизацию критически важных приложений.

Для поддержки этих сценариев Azure Stack Hub предоставляет следующее.

- Интегрированный интерфейс доставки, позволяющий быстро настроить и подготовить к работе специализированные интегрированные системы Azure Stack Hub доверенных партнеров по оборудованию. После доставки Azure Stack Hub легко интегрируется в центр обработки данных и систему мониторинга с помощью пакета управления System Center Operations Manager или расширения Nagios.

- Гибкое управление удостоверениями через Azure Active Directory (AAD) для гибридных сред Azure и Azure Stack Hub, а также применение служб федерации Active Directory (AD FS) для развертываний без подключения к Интернету.

- Согласованная с Azure среда разработки приложений, позволяющая добиться максимальной производительности разработчиков и применять стандартные подходы DevOps во всех сегментах гибридной среды.

- Доставка служб Azure из локальной среды с применением вычислительных мощностей гибридного облака. Внедряйте стандартизированные методы работы в Azure и Azure Stack Hub, чтобы развертывать и эксплуатировать службы Azure IaaS (инфраструктура как услуга) и PaaS (платформа как услуга) с теми же возможностями администрирования и средствами, которые доступны в Azure. Корпорация Майкрософт постоянно внедряет инновации Azure в среду Azure Stack Hub, в том числе новые службы Azure, обновления существующих служб и дополнительные приложения и образы Azure Marketplace.

## <a name="azure-stack-hub-architecture"></a>Архитектура Azure Stack Hub

Интегрированные системы Azure Stack Hub состоят из 4–16 объединенных в стойку серверов. Они разрабатываются доверенными партнерами по оборудованию и доставляются прямо в ваш центр обработки данных. После доставки поставщик решения поможет вам развернуть интегрированную систему и убедиться, что решение Azure Stack Hub соответствует бизнес-требованиям вашей организации. Подготовьте свой центр обработки данных путем обеспечения необходимого электропитания, охлаждения и подключения к пограничной сети, а также выполнения других требований к интеграции центра обработки данных.

> Дополнительные сведения о требованиях к интеграции для центра обработки данных Azure Stack Hub см. в статье [об интеграции центра обработки данных Azure Stack Hub](azure-stack-customer-journey.md).

Azure Stack Hub работает на стандартном для отрасли оборудовании и управляется теми же средствами, которые вы обычно используете для управления подписками Azure. Все это позволяет применять согласованные процессы DevOps независимо от наличия подключения к Azure.

Архитектура Azure Stack Hub позволяет предоставлять службы Azure на границе для удаленных расположений, при нестабильном или отсутствующем подключении к Интернету. Вы можете создать гибридные решения, которые обрабатывают данные локально в Azure Stack Hub и передают их в Azure для дополнительной обработки и анализа. Наконец, локальная установка Azure Stack Hub позволяет соответствовать определенным требованиям или политикам благодаря широким возможностям развертывания облачных приложений в локальной среде без изменения кода.

## <a name="deployment-options"></a>Варианты развертывания

### <a name="production-or-evaluation-environments"></a>Рабочая или оценочная среда

Azure Stack Hub предоставляется в двух вариантах развертывания с учетом конкретных потребностей: интегрированная система Azure Stack Hub для рабочей среды или Пакет средств разработки Azure Stack Hub (ASDK) для оценки Azure Stack Hub:

- **Интегрированные системы Azure Stack Hub**: Интегрированные системы Azure Stack Hub предоставляются благодаря партнерским отношениям Майкрософт и партнеров по оборудованию. Это позволяет создать решение с инновациями облачного уровня и простотой управления вычислениями. Так как Azure Stack Hub предлагается в качестве встроенного оборудования и программного обеспечения системы, у вас есть необходимые возможности и элемент управления, а также возможность внедрять инновации облачного уровня. Интегрированные системы Azure Stack Hub с размером 4-16 узлов поддерживает как партнер по оборудованию, так и корпорация Майкрософт. Использование интегрированных систем Azure Stack Hub позволяет создавать новые сценарии и развертывать новые решения для производственных рабочих нагрузок.

- **Пакет средств разработки Azure Stack Hub (ASDK)** : [ASDK](../asdk/asdk-what-is.md) предоставляет бесплатное развертывание Azure Stack Hub с одним узлом, что удобно для оценки и изучения Azure Stack Hub. Вы также можете использовать ASDK как среду разработки для разработки приложений с помощью API и средств, совместимых с Azure. Тем не менее, ASDK не предназначен для использования в рабочей среде и имеет ряд ограничений по сравнению с полным развертыванием интегрированных систем для рабочей среды.

    - ASDK можно связать только с одним поставщиком удостоверений Azure AD или AD FS.
    - Так как компоненты Azure Stack Hub развертываются на одном компьютере, для клиентских ресурсов доступны ограниченные физические ресурсы. Эта конфигурация не годится для масштабирования или оценки производительности.
    - Сценарии сети ограничены из-за одного узла и требований к развертыванию сетевой карты.

### <a name="connection-models"></a>Модели подключения

Вы можете выбрать развертывание Azure Stack Hub **с подключением** к Интернету (и Azure) или в **автономном** режиме. Этот выбор определяет доступные варианты для хранилища удостоверений (AAD или AD FS) и модель выставления счетов (с оплатой по мере использования или на основе емкости).

> Изучите дополнительные сведения о [подключенной](azure-stack-connected-deployment.md) и [автономной](azure-stack-disconnected-deployment.md) моделях развертывания.

### <a name="identity-provider"></a>Поставщик удостоверений 

Для предоставления удостоверений Azure Stack Hub использует Azure AD или Active AD FS. Azure AD — это облачный, мультитенантный поставщик удостоверений Майкрософт. В большинстве гибридные сценариев с подключенным к Интернету развертыванием в качестве хранилища идентификаторов используется AAD.

Вы можете использовать AD FS для развертываний Azure Stack Hub без подключения. Поставщики ресурсов Azure Stack Hub и другие приложения одинаково работают с AD FS и Azure AD. Azure Stack Hub включает собственный экземпляр Active Directory и API Graph Active Directory.

> [!IMPORTANT]
> Поставщик удостоверений нельзя изменить после развертывания. Чтобы использовать другой поставщик удостоверений, нужно повторно развернуть Azure Stack Hub. Дополнительные сведения о размещении удостоверений Azure Stack Hub вы найдете в [этой статье](azure-stack-identity-overview.md).

## <a name="how-is-azure-stack-hub-managed"></a>Как управляется Azure Stack Hub?

Для управления Azure Stack Hub можно использовать портал администратора, портал пользователя или [PowerShell](https://docs.microsoft.com/powershell/azure/azure-stack/overview?view=azurestackps-1.7.1). Каждый портал Azure Stack Hub размещается в отдельных экземплярах Azure Resource Manager. **Оператор Azure Stack Hub** использует портал администратора для управления Azure Stack Hub и выполнения таких действий, как создание предложений для клиентов, поддержание работоспособности и мониторинг состояния интегрированной системы. Пользовательский портал предоставляет возможность самообслуживания при использовании облачных ресурсов, например, виртуальных машин, учетных записей хранилища и веб-приложений.

> Дополнительные сведения об управлении Azure Stack Hub с помощью портала администратора см. в [этом кратком руководстве](azure-stack-manage-portals.md).

Оператор Azure Stack Hub может предоставлять широкий выбор служб и приложений, как, например, [виртуальные машины](azure-stack-tutorial-tenant-vm.md), [веб-приложения](azure-stack-app-service-overview.md), базы данных [SQL Server](azure-stack-tutorial-sql.md) или [MySQL Server](azure-stack-tutorial-mysql.md) с высоким уровнем доступности. С помощью [шаблонов Azure Resource Manager для быстрого запуска Azure Stack Hub](https://github.com/Azure/AzureStack-QuickStart-Templates) вы можете развернуть SharePoint, Exchange и многое другое.

Используя портал администратора вы можете [настроить Azure Stack Hub для доставки служб](service-plan-offer-subscription-overview.md) арендаторам, используя планы, квоты, предложения и подписки. Пользователи арендаторов могут подписаться на несколько предложений. В предложении может быть один или несколько планов, а в плане может быть одна или несколько служб. Операторы также управляют емкостью и реагируют на оповещения.

В настроенной системе Azure Stack Hub **Пользователь Azure Stack Hub** использует службы, которые предлагает оператор. Пользователи могут подготавливать к работе, отслеживать службы, на которые они подписаны, например, веб-приложения, хранилище и виртуальные машины, а также управлять ими.

> Дополнительные сведения об управлении Azure Stack Hub, в том числе об использовании разных учетных записей, типичных обязанностях оператора, необходимых сообщениях для пользователей и получении справки и помощи, вы найдете в статье [об основах администрирования Azure Stack Hub](azure-stack-manage-basics.md).

## <a name="resource-providers"></a>Поставщики ресурсов

Поставщиками ресурсов называют веб-службы, которые образуют основу для всех служб IaaS и PaaS на платформе Azure Stack Hub. Azure Resource Manager использует разные поставщики ресурсов для предоставления доступа к службам. Каждый из поставщиков ресурсов может оказать вам помощь в настройке соответствующих ресурсов и управлении ими. Кроме того, администраторы служб могут добавлять новые поставщики ресурсов.

### <a name="foundational-resource-providers"></a>Базовые поставщики ресурсов

Существует три базовых поставщика ресурсов IaaS:

- **Среда выполнения приложений** Поставщик вычислительных ресурсов позволяет арендаторам Azure Stack Hub создавать собственные виртуальные машины. Поставщик вычислительных ресурсов предоставляет возможность создавать виртуальные машины и расширения для них. Служба расширений виртуальной машины обеспечивает возможности IaaS для виртуальных машин Windows и Linux. Например, вы можете использовать поставщика вычислительных ресурсов для предоставления виртуальной машины Linux и запуска Bash-скриптов во время развертывания для настройки виртуальной машины.
- **Поставщик сетевых ресурсов**: Поставщик сетевых ресурсов предоставляет ряд функций программно-конфигурируемой сети (SDN) и виртуализацию функций сети (NFV) для частного облака. С помощью поставщика сетевых ресурсов можно создавать такие ресурсы, как балансировщики нагрузки ПО, общедоступные IP-адреса, группы безопасности сети и виртуальные сети.
- **Поставщик ресурсов хранилища**: Поставщик ресурсов хранилища предоставляет четыре согласованных с Azure службы хранилища: для [BLOB-объектов](https://docs.microsoft.com/azure/storage/common/storage-introduction#blob-storage), [очередей](https://docs.microsoft.com/azure/storage/common/storage-introduction#queue-storage), [таблиц](https://docs.microsoft.com/azure/storage/common/storage-introduction#table-storage) и управления учетными записями [KeyVault](https://docs.microsoft.com/azure/key-vault/). Это позволяет администрировать и контролировать такие секретные данные, как пароли и сертификаты. Поставщик ресурсов хранилища предоставляет также облачную службу администрирования хранилища, чтобы облегчить администрирование служб совместимого с Azure хранилища. Служба хранилища Azure обеспечивает гибкость хранения и извлечения большого количества неструктурированных данных, таких как документы и мультимедийные файлы, с помощью больших двоичных объектов Azure, а также структурированных данных на основе NoSQL с помощью таблиц Azure.

### <a name="optional-resource-providers"></a>Дополнительные поставщики ресурсов

Существует три дополнительных поставщика ресурсов PaaS, которые можно развернуть и использовать с Azure Stack Hub:

- **Служба приложений**: [Служба приложений Azure в Azure Stack Hub](azure-stack-app-service-overview.md) — это предложение Microsoft Azure в формате PaaS для Microsoft Azure Stack Hub. Эта служба позволяет внутренним и внешним клиентам создавать веб-приложения, API и приложения Функций Azure для любых платформ и устройств.
- **SQL Server**. Чтобы предоставлять базы данных SQL как услуги в Azure Stack Hub, используйте [поставщик ресурсов SQL Server](azure-stack-sql-resource-provider.md). Установив поставщик ресурсов и подключив его к одному или нескольким экземплярам SQL Server, вы и ваши пользователи смогут создавать базы данных для облачных приложений, веб-сайтов с поддержкой SQL и других рабочих нагрузок, которые используют SQL.
- **MySQL Server**: Используйте [поставщик ресурсов MySQL Server](azure-stack-mysql-resource-provider-deploy.md), чтобы предоставлять доступ к базам данных MySQL в качестве службы Azure Stack Hub. Поставщик ресурсов MySQL выполняется как служба в виртуальной машине ядра сервера Windows Server 2016.

## <a name="providing-high-availability"></a>Обеспечение высокого уровня доступности

Чтобы добиться высокого уровня доступности рабочих систем с несколькими виртуальными машинами в Azure, виртуальные машины размещаются в [группе доступности](https://docs.microsoft.com/azure/virtual-machines/windows/manage-availability#configure-multiple-virtual-machines-in-an-availability-set-for-redundancy), которая распределяет их между несколькими доменами сбоя и доменами обновления. При меньшем масштабе Azure Stack Hub неисправный домен в группе доступности определяется как один узел в единице масштабирования.  

Инфраструктура Azure Stack Hub уже устойчива к сбоям, но базовая технология (отказоустойчивая кластеризация) по-прежнему приводит к некоторому времени простоя виртуальных машин на поврежденном физическом сервере в случае сбоя оборудования. Azure Stack Hub поддерживает группы доступности с максимально тремя доменами сбоя, что гарантирует согласованность с Azure.

- **Домены сбоя**. Виртуальные машины, размещенные в группе доступности, физически изолированы друг от друга и как можно более равномерно распределяются по нескольким доменам сбоя (узлы Azure Stack Hub). В случае сбоя оборудования виртуальные машины домена со сбоем будут перезапущены в других доменах со сбоем. Они будут храниться в отдельных доменах со сбоем из других виртуальных машин, но, по возможности, в той же группе доступности. После восстановления работоспособности оборудования виртуальные машины перераспределяются, что обеспечивает высокий уровень доступности.

- **Домены обновления**. Домены обновления — это еще одна концепция Azure, обеспечивающая высокий уровень доступности в группах доступности. Домен обновления — это логическая группа базового оборудования, которое может одновременно обслуживаться. Во время планового обслуживания виртуальные машины в одном домене обновления перезапускаются вместе. При создании клиентом виртуальных машин в группе доступности платформа Azure автоматически распределяет их между такими доменами обновления. В Azure Stack Hub виртуальные машины в реальном времени переносятся на другие доступные узлы в кластере до обновления их базового узла. Так как во время обновления узла клиент не простаивает, функция обновления домена в Azure Stack Hub существует только для совместимости с шаблонами Azure. Для виртуальных машин в группе доступности будет отображаться значение **0** в качестве номера домена обновления на портале.

## <a name="role-based-access-control"></a>Управление доступом на основе ролей

Управление доступом на основе ролей (RBAC) можно использовать для предоставления доступа к системе для авторизованных пользователей, групп и служб, назначая им роли на уровне отдельного ресурса, группы ресурсов или подписки. Каждая роль определяет уровень доступа пользователя, группы или службы к ресурсам Microsoft Azure Stack Hub.

Механизм RBAC в Azure Stack Hub предоставляет три основные роли, которые применяются ко всем типам ресурсов. Владелец, участник и читатель. Владелец имеет полный доступ ко всем ресурсам, включая право делегировать доступ другим. Участник — может создавать все типы ресурсов Azure и управлять ими, но не может предоставлять доступ другим пользователям. Читатель может только просматривать существующие ресурсы. Остальные роли RBAC разрешают управление определенными ресурсами Azure. Например, роль участника виртуальной машины разрешает создавать виртуальные машины и управлять ими, но не разрешает управлять виртуальной сетью или подсетью, к которой подключается виртуальная машина.

> См. дополнительные сведения [об управлении доступом на основе ролей](azure-stack-manage-permissions.md).

## <a name="reporting-usage-data"></a>Отчеты по данным об использовании

Azure Stack Hub собирает и объединяет данные об использовании всех поставщиков ресурсов и передает их в Azure для обработки с помощью коммерческого предложения Azure. Данные об использовании, собранные в Azure Stack Hub, можно просмотреть с помощью REST API. Для получения данных об использовании для всех подписок клиентов существует согласованный с Azure API клиента, а также API поставщика и делегированного поставщика. Эти данные можно использовать во внешнем инструменте или службе, предназначенной для выставления счетов или взимания средств за использование. После того как данные о потреблении были обработаны коммерческим предложением Azure, их можно просмотреть на портале управления счетами и подписками Azure.

> См. дополнительные сведения [о передаче в Azure данных об использовании Azure Stack Hub](azure-stack-usage-reporting.md).

## <a name="next-steps"></a>Дополнительная информация

[Сравнение Azure Stack Hub и глобальной среды Azure](compare-azure-azure-stack.md).

[Основы администрирования](azure-stack-manage-basics.md).

[Краткое руководство. Использование портала администрирования Azure Stack Hub](azure-stack-manage-portals.md).
