---
title: Обновление Службы приложений Azure в Azure Stack Hub
description: Узнайте, как обновить Службу приложений Azure в Azure Stack Hub.
author: BryanLa
ms.topic: article
ms.date: 01/13/2019
ms.author: anwestg
ms.reviewer: anwestg
ms.lastreviewed: 01/13/2019
ms.openlocfilehash: 07cf0762a87fbf0cea490d246e6e31e003fd7275
ms.sourcegitcommit: a7db4594de43c31fe0c51e60e84fdaf4d41ef1bb
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/24/2020
ms.locfileid: "77568611"
---
# <a name="update-azure-app-service-on-azure-stack-hub"></a>Обновление Службы приложений Azure в Azure Stack Hub

> [!IMPORTANT]
> Прежде чем развертывать Службу приложений Azure 1.8, примените обновление 1910 к интегрированной системе Azure Stack Hub или разверните последнюю версию Пакета средств разработки Azure Stack Hub (ASDK).

В этой статье описано, как обновить [поставщик ресурсов Службы приложений Azure](azure-stack-app-service-overview.md), развернутый в подключенной к Интернету среде Azure Stack Hub.

> [!IMPORTANT]
> Перед обновлением [разверните Службу приложений Azure в Azure Stack Hub](azure-stack-app-service-deploy.md). Рекомендуется также ознакомиться с [заметками о выпуске 1.8](azure-stack-app-service-release-notes-update-eight.md), чтобы получить представление о новых функциях, исправлениях и известных проблемах, которые могут повлиять на развертывание.

## <a name="run-the-azure-app-service-resource-provider-installer"></a>Запуск установщика поставщика ресурсов Службы приложений Azure

В ходе обновления выполняются следующие действия:

* обнаружение предыдущего развертывания Службы приложений Azure;
* подготовка всех пакетов обновления и новых версий всех библиотек OSS для развертывания;
* отправка в хранилище;
* обновление всех ролей Службы приложений Azure (контроллеры, управление, внешний интерфейс, издатель и рабочие роли);
* обновление определений масштабируемого набора Службы приложений Azure;
* обновление манифеста поставщика ресурсов Службы приложений Azure.

> [!IMPORTANT]
> Установщик Службы приложений Azure необходимо запустить на компьютере, у которого есть доступ к конечной точке Azure Resource Manager учетной записи администратора Azure Stack Hub.

Чтобы обновить развертывание Службы приложений Azure в Azure Stack Hub, сделайте следующее:

1. Скачайте [установщик Службы приложений Azure](https://aka.ms/appsvcupdate8installer).

2. Запустите файл appservice.exe от имени администратора.

    ![Установщик Службы приложений Azure][1]

3. Щелкните **Deploy Azure App Service or upgrade to the latest version** (Разверните Службу приложений Azure или проведите обновление до последней версии).

4. Просмотрите и примите условия лицензионного соглашения об использовании программного обеспечения Майкрософт, а затем нажмите кнопку **Далее**.

5. Просмотрите и примите условия лицензии сторонних поставщиков и нажмите кнопку **Далее**.

6. Убедитесь, что конечная точка Azure Resource Manager инфраструктуры Azure Stack Hub и сведения о клиенте Active Directory указаны правильно. Если во время развертывания Пакета средств разработки Azure Stack использовались настройки по умолчанию, их можно использовать и сейчас. Но если вы указали другие значения при развертывании Azure Stack Hub, в этом окне необходимо изменить значения соответствующим образом. Например, если используется суффикс домена *mycloud.com*, для конечной точки Azure Resource Manager инфраструктуры Azure Stack Hub нужно указать значение *management.region.mycloud.com*. Проверьте сведения и щелкните **Далее**.

    ![Сведения об облаке Azure Stack Hub][2]

7. На следующей странице:

    1. Выберите предпочитаемый метод подключения — с помощью **учетных данных** или **субъекта-службы**.
        - **Учетные данные**
            - При использовании Azure Active Directory (Azure AD) введите учетную запись администратора Azure AD и пароль, указанный при развертывании Azure Stack Hub Выберите **Подключиться**.
            - Если вы используете службы федерации Active Directory (AD FS), предоставьте соответствующую учетную запись администратора. Например, cloudadmin@azurestack.local. Введите пароль и затем щелкните **Подключить**.
        - **Субъект-служба**
            - Используемый субъект-служба **должен** иметь права **владельца** в **подписке поставщика по умолчанию**.
            - Укажите значения для параметров **Идентификатор субъект-службы**, **Файл сертификата**, **Пароль** и щелкните **Подключить**.

    1. В разделе **Azure Stack Hub Subscriptions** (Подписки Azure Stack Hub) выберите **Default Provider Subscription** (Подписка поставщика по умолчанию).    Служба приложений Azure в Azure Stack Hub **должна** быть развернута в **подписке поставщика по умолчанию**.

    1. В поле **Azure Stack Hub Locations** (Расположения Azure Stack Hub) выберите расположение, соответствующее региону, в который выполняется развертывание. Например, для развертывания в ASDK выберите **локальное расположение**.

    1. Если обнаружено существующее развертывание Службы приложений Azure, поля группы ресурсов и учетной записи хранения заполняются и становятся недоступными.

      ![Обнаруженная установка Службы приложений Azure][3]

8. На странице "Сводка" выполните следующие действия.
   1. Проверьте выбранные параметры. Чтобы внести изменения, используйте кнопки **Назад** для перехода на предыдущие страницы.
   2. Если настройки указаны правильно, установите флажок.
   3. Чтобы начать обновление, нажмите кнопку **Далее**.

       ![Сводка обновления Службы приложений Azure][4]

9. На странице хода обновления:
    1. Отслеживайте ход обновления. Длительность обновления Службы приложений Azure в Azure Stack Hub зависит от количества развернутых экземпляров ролей.
    2. После успешного обновления щелкните **Выход**.

        ![Ход обновления Службы приложений Azure][5]

<!--Image references-->
[1]: ./media/azure-stack-app-service-update/app-service-exe.png
[2]: ./media/azure-stack-app-service-update/app-service-azure-resource-manager-endpoints.png
[3]: ./media/azure-stack-app-service-update/app-service-installation-detected.png
[4]: ./media/azure-stack-app-service-update/app-service-upgrade-summary.png
[5]: ./media/azure-stack-app-service-update/app-service-upgrade-complete.png

## <a name="next-steps"></a>Дальнейшие действия

Подготовьтесь к операциям администрирования для Службы приложений Azure в Azure Stack Hub:

* [Планирование дополнительной емкости](azure-stack-app-service-capacity-planning.md)
* [Добавление дополнительной емкости](azure-stack-app-service-add-worker-roles.md)
