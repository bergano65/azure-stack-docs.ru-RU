---
title: Мониторинг работоспособности и оповещений в Azure Stack Hub
description: Узнайте, как контролировать работоспособность и отслеживать оповещения в Azure Stack Hub.
author: IngridAtMicrosoft
ms.topic: how-to
ms.date: 03/04/2020
ms.author: inhenkel
ms.lastreviewed: 01/18/2019
ms.openlocfilehash: f2b827510087a40ae011e506b5d1f467153e3fdb
ms.sourcegitcommit: 1fa0140481a483e5c27f602386fe1fae77ad29f7
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/05/2020
ms.locfileid: "78368096"
---
# <a name="monitor-health-and-alerts-in-azure-stack-hub"></a>Мониторинг работоспособности и оповещений в Azure Stack Hub

Azure Stack Hub предоставляет ряд возможностей для мониторинга, которые помогают отслеживать работоспособность и просматривать оповещения для региона Azure Stack Hub. На плитке **Region management** (Управление регионами) перечислены все развернутые регионы Azure Stack Hub. По умолчанию она закреплена на портале администрирования для подписки поставщика по умолчанию. На плитке отображается количество активных критических и предупреждающих оповещений для каждого региона. Плитка представляет собой точку входа в компонент отслеживания работоспособности и оповещений Azure Stack Hub.

![Плитка Region Management (Управление регионами) на портале администрирования Azure Stack Hub](media/azure-stack-monitor-health/image1.png)

## <a name="understand-health-in-azure-stack-hub"></a>Концепция работоспособности в Azure Stack Hub

За отслеживание работоспособности и оповещения отвечает поставщик ресурсов работоспособности. В процессе развертывания и настройки Azure Stack Hub компоненты инфраструктуры Azure Stack Hub регистрируются в поставщике ресурсов работоспособности. Такая регистрация позволяет отображать сведения о работоспособности и оповещения для каждого компонента. В Azure Stack Hub используется очень простое определение работоспособности. Если для зарегистрированного экземпляра компонента существуют оповещения, состояние работоспособности этого компонента определяется по наивысшему уровню серьезности активных оповещений: "предупреждение" или "критическое".

## <a name="alert-severity-definition"></a>Определение серьезности оповещений

В Azure Stack Hub оповещения имеют только два уровня серьезности: **предупреждение** и **критическое**.

- **Предупреждение**  
  Оператор может решить проблему, связанную с предупреждениями в плановом режиме. Такие оповещения обычно не влияют на пользовательские рабочие нагрузки.

- **Критическая**  
  Критически важные оповещения следует обрабатывать как можно скорее. Эти оповещения указывают на проблемы, которые влияют или вскоре повлияют на работу пользователей Azure Stack Hub.


## <a name="view-and-manage-component-health-state"></a>Просмотр состояния работоспособности компонента и управление им

Вы можете просматривать состояние работоспособности компонентов на портале администратора или с помощью REST API и PowerShell.

Чтобы просмотреть состояние работоспособности на портале, щелкните нужный регион на плитке **Region management** (Управление регионами). Вы можете просмотреть состояние работоспособности для инфраструктурных ролей и поставщиков ресурсов.

![Список инфраструктурных ролей](media/azure-stack-monitor-health/image2.png)

Щелкните поставщик ресурсов или инфраструктурную роль, чтобы просмотреть подробные сведения.

> [!WARNING]  
> Если вы щелкнете инфраструктурную роль, а затем выберете экземпляр роли, отобразится меню с действиями **запуска**, **перезапуска** и **завершения работы**. Не используйте эти действия при установке обновлений в интегрированной системе. Кроме того, их **не** следует применять в среде Пакета средств разработки Azure Stack (ASDK). Эти элементы предназначены только для интегрированной среды, в которой каждая инфраструктурная роль выполняется в нескольких экземплярах роли. Перезапуск экземпляра роли (особенно AzS-Xrp01) в среде пакета ASDK приводит к дестабилизации системы. Чтобы получить помощь в устранении неполадок, опубликуйте свою проблему на [форуме по Azure Stack Hub](https://aka.ms/azurestackforum).
>

## <a name="view-alerts"></a>Просмотр оповещений

Список активных оповещений для каждого региона Azure Stack Hub можно открыть непосредственно из колонки **Region management** (Управление регионами). В конфигурации по умолчанию первой располагается плитка **Оповещения**, которая содержит сводку по критическим и предупреждающим оповещениям для этого региона. Вы можете закрепить плитку оповещений, как и любую другую плитку из этой колонки, на панели мониторинга для быстрого доступа.

![Плитка "Оповещения", отображающая предупреждение на портале администрирования Azure Stack Hub](media/azure-stack-monitor-health/image3.png)

 Чтобы просмотреть список всех активных оповещений для этого региона, выберите верхнюю часть плитки **Оповещения**. Чтобы открыть отфильтрованный список оповещений (критических или предупреждающих), выберите любой из элементов на этой плитке (**Критические** или **Предупреждающие**).

Колонка **Оповещения** поддерживает фильтрацию по состоянию (активные или закрытые) и серьезности (критические или предупреждающие). В представлении по умолчанию отображаются все активные оповещения. Все закрытые оповещения удаляются из системы через семь дней.

>[!Note]
>Если предупреждение остается активным, но не обновлялось в течение дня, можно запустить [Test-AzureStack](azure-stack-diagnostic-test.md) и закрыть оповещение при отсутствии сообщений о проблемах.

![Панель фильтров для фильтрации по критическому состоянию или состоянию предупреждения на портале администрирования Azure Stack Hub](media/azure-stack-monitor-health/alert-view.png)

Действие **View API** (Показать API) позволяет открыть REST API, который использовался для создания представления списка. Эта дает возможность быстро ознакомиться с синтаксисом REST API, чтобы применять его для получения сведений об оповещениях. Этот API можно использовать в службе автоматизации или для интеграции с существующими решениями мониторинга центра обработки данных, подготовки отчетов или отслеживания проблем.

Вы можете щелкнуть любое оповещение, чтобы просмотреть сведения о нем. Сведения об оповещении содержат все поля, связанные с этим оповещением. Отсюда вы можете быстро перейти к затронутым компонентам и (или) к источнику оповещения. Например, указанное ниже оповещение возникает при отключении или недоступности одного из экземпляров инфраструктурной роли.  

![Колонка сведений об оповещении на портале администрирования Azure Stack Hub](media/azure-stack-monitor-health/alert-detail.png)

## <a name="repair-alerts"></a>Оповещения с исправлением

В некоторых оповещениях можно выбрать действие **Исправить**.

При выборе действия **Исправить** выполняется заданная для оповещения процедура попытки устранения проблемы. После выбора этого действия его состояние **отображается** в виде уведомлений портала.

![Выполняется действие оповещения об исправлении](media/azure-stack-monitor-health/repair-in-progress.png)

Действие **Исправить** сообщит об успешном или неуспешном завершении процедуры в той же колонке уведомлений на портале.  При сбое действия **Исправить** для оповещения можно попробовать запустить его повторно из раздела сведений об оповещении. В случае успешного выполнения действия по **исправлению** **не** запускайте его повторно.

![Действие восстановления успешно завершено](media/azure-stack-monitor-health/repair-completed.png)

Когда экземпляр инфраструктурной роли вернется в оперативный режим, оповещение автоматически закроется. Многие (но не все) оповещения автоматически закрываются после устранения проблемы. Оповещения, в которых есть кнопка действия "Исправить", закрываются автоматически, если Azure Stack Hub удается устранить проблему. Для всех других оповещений нажимайте кнопку **Закрыть оповещение** после того, как вы выполните действия по исправлению. Если проблема сохранится, Azure Stack Hub создаст оповещение. Если же проблема решена успешно, оповещение остается закрытым и не требует дополнительных действий.

## <a name="next-steps"></a>Дальнейшие действия

[Общие сведения об управлении обновлениями в Azure Stack Hub](azure-stack-updates.md)

[Управление регионами в Azure Stack Hub](azure-stack-region-management.md)
