---
title: Управление профилями версий API в Azure Stack Hub
description: Узнайте о профилях версий API в центре Azure Stack Hub.
author: sethmanheim
ms.topic: article
ms.date: 01/06/2020
ms.author: sethm
ms.reviewer: sijuman
ms.lastreviewed: 07/24/2019
ms.openlocfilehash: 2e229c8add5b850384c7b46d05373c4ee19fd266
ms.sourcegitcommit: 4ac711ec37c6653c71b126d09c1f93ec4215a489
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/27/2020
ms.locfileid: "77705157"
---
# <a name="manage-api-version-profiles-in-azure-stack-hub"></a>Управление профилями версий API в Azure Stack Hub

Профили API определяют поставщик ресурсов Azure и версию API для конечных точек Azure REST. С помощью профилей API можно создать пользовательские клиенты на разных языках. Каждый клиент использует профиль API для связи с правильным поставщиком ресурсов и версией API для Azure Stack Hub.

Вы можете создать приложение для работы с поставщиками ресурсов Azure без необходимости точно определять, какая версия каждого API поставщика ресурсов совместима с Azure Stack Hub. Просто сопоставьте приложение с профилем. Пакет SDK отменит изменения до правильной версии API.

В этой статье содержатся сведения:

- о профилях API для Azure Stack Hub;
- о том, как разрабатывать решения с их помощью;
- о том, как найти руководство по написанию кода.

## <a name="summary-of-api-profiles"></a>Сводка по профилям API

- Профили API представляют набор поставщиков ресурсов Azure и их версий API.
- Профили API предназначены для пользователей, создающих шаблоны в нескольких облаках Azure. Профили предоставляют совместимый и стабильный интерфейс.
- Профили выпускаются четыре раза в год.
- Ниже перечислены три соглашения об именовании профилей.
  - **Актуальная**  
        Содержит самые последние версии API, выпущенные в глобальной среде Azure.
  - **yyyy-mm-dd-hybrid**  
    Этот выпуск выходит два раза в год и обеспечивает согласованность и стабильность в нескольких облаках. Этот профиль предназначен для оптимальной совместимости с Azure Stack Hub.
  - **yyyy-mm-dd-profile** <br>
    Обеспечивает разумное соотношение между оптимальной стабильностью и новейшими функциями.

## <a name="azure-api-profiles-and-azure-stack-hub-compatibility"></a>Профили API Azure и совместимость с Azure Stack Hub

Новейшие профили API Azure несовместимы с Azure Stack Hub. Можно использовать следующие соглашения об именовании для идентификации профилей, которые необходимо использовать для своих решений Azure Stack Hub:

**Актуальная**  
Этот профиль включает в себя последние версии API, доступные в глобальной среде Azure. Эти версии не будут работать в Azure Stack Hub. Профиль **latest** содержит наибольшее количество критических изменений. Он не учитывает стабильность и совместимость с другими облаками. Если вам необходимы последние версии API, используйте профиль **latest**.

**yyyy-mm-dd-hybrid**  
Этот профиль выпускается в марте и сентябре каждого года. Он обладает оптимальной стабильностью и совместимостью с различными облаками и разрабатывается специально для глобальной платформы Azure с Azure Stack Hub. Версии API Azure, указанные в этом профиле, соответствуют версиям, указанным в Azure Stack Hub. Вы можете использовать этот профиль для разработки кода для гибридных облачных решений.

**yyyy-mm-dd-profile**  
Этот профиль выпускается в глобальной среде Azure в июне и декабре каждого года. Он не работает с Azure Stack Hub. Как правило, он будет содержать большое число критических изменений. Хотя этот профиль не обладает оптимальной стабильностью и не содержит последние компоненты, различие между этим профилем и профилем **Latest** состоит в том, что профиль **Latest** всегда содержит последние версии API, независимо от того, когда они были выпущены. Например, если завтра будет выпущена новая версия API службы вычислений, эта версия API будет указана в профиле **Latest**, но не будет указана в профиле **yyyy-mm-dd-profile**, так как он уже существует. Профиль **гггг-мм-дд-profile** охватывает большинство последних версий, выпущенных до июня или декабря.

## <a name="azure-resource-manager-api-profiles"></a>Профили API Azure Resource Manager

Azure Stack Hub не использует последнюю версию из версий API в глобальной среде Azure. При создании решения необходимо найти версию API для каждого поставщика ресурсов Azure, которая совместима с Azure Stack Hub.

Вместо исследования каждого поставщика ресурсов и определенной версии, поддерживаемой Azure Stack Hub, можно использовать профиль API. Профиль определяет набор поставщиков ресурсов и версий API. Пакет SDK или инструмент, созданный с его помощью, выполнит откат до целевой `api-version`, указанной в профиле. С помощью профилей API можно указать версию профиля, которая применяется ко всему шаблону. Во время выполнения Azure Resource Manager выбирает правильную версию ресурса.

Профили API работают с инструментами, которые используют Azure Resource Manager, такими как PowerShell, Azure CLI, предоставленный в пакете SDK код и Microsoft Visual Studio. Инструменты и пакеты SDK могут использовать профили, чтобы определить, какую версию модулей и библиотек следует включать при сборке приложения.

Например, если использовать PowerShell для создания учетной записи хранения с помощью поставщика ресурсов **Microsoft.Storage**, который поддерживает **api-version** 2016-03-30, и виртуальной машины с помощью поставщика ресурсов **Microsoft.Compute** с **api-version** 2015-12-01, необходимо найти модуль PowerShell, поддерживающий версию 2016-03-30 для хранилища, и модуль, поддерживающий версию 2015-02-01 для вычислений, а затем установить их. Вместо этого можно использовать профиль. Используйте командлет `Install-Profile <profilename>`, и PowerShell загрузит правильную версию модулей.

Аналогичным образом при использовании пакета SDK для Python, чтобы создать приложение на основе Python, можно указать профиль. Пакет SDK загружает правильные модули для поставщиков ресурсов, которые указаны в сценарии.

Разработчик может сосредоточиться на написании решения. Вместо того чтобы определять, какие версии API, поставщики ресурсов и облака работают как единое целое, используйте профиль. Так вы будете уверены, что ваш код будет работать для всех облаков, которые поддерживают этот профиль.

## <a name="api-profile-code-samples"></a>Примеры кода для профиля API

Вы можете найти примеры кода, которые помогут интегрировать решение с предпочитаемым языком с помощью Azure Stack Hub, используя профили. В настоящее время руководства и примеры можно найти для следующих языков:

- **.NET** <br>
С помощью профиля API .NET можно получить последнюю и наиболее стабильную версию ресурса любого типа из представленных в пакете поставщика ресурсов. Дополнительные сведения см. в статье об [использовании профилей версий API и .NET в Azure Stack Hub](azure-stack-version-profiles-net.md).
- **PowerShell**  
Используйте модуль **AzureRM.Bootstrapper**, доступный в коллекции PowerShell, чтобы получить командлеты PowerShell, необходимые для работы с профилями версий API. Дополнительные сведения см. в статье [Use API version profiles for PowerShell in Azure Stack](azure-stack-version-profiles-powershell.md) (Использование профилей версии API для PowerShell в Azure Stack).
- **Azure CLI**  
Укажите в конфигурации среды версию API, специально предназначенную для Azure Stack Hub. См. дополнительные сведения об [использовании профилей версий API и для Azure CLI](azure-stack-version-profiles-azurecli2.md).
- **GO**  
В пакете SDK для Go профиль является сочетанием различных типов ресурсов с разными версиями различных служб. Профили доступны в папке profiles/<путь>, их версия указана в формате **ГГГГ-ММ-ДД**. Дополнительные сведения см. в статье [Использование профилей версий API и Go в Azure Stack](azure-stack-version-profiles-go.md).
- **Ruby**  
Пакет SDK Ruby для Resource Manager Azure Stack Hub предоставляет средства для создания и администрирования инфраструктуры. Поставщики ресурсов в пакете SDK включают вычисления, виртуальные сети и хранилища на языке Ruby. Дополнительные сведения см. в статье [Использование профилей версии API в Ruby](azure-stack-version-profiles-ruby.md).
- **Python**  
Пакет SDK для Python поддерживает профили версии API для разных облачных платформ, например Azure Stack Hub и глобальной среды Azure. Вы можете использовать профили API при создании решений для гибридного облака. Дополнительные сведения см. в статье [Использование профилей версий API и Python в Azure Stack](azure-stack-version-profiles-python.md).
- **Node.js**  
Пакет SDK Node.js для Resource Manager для Azure Stack Hub предоставляет инструменты для создания инфраструктуры и управления ею. Дополнительные сведения см. в разделе [Использование профилей версий API с пакетом средств разработки (SDK) для Node.js в Azure Stack](azure-stack-version-profile-nodejs.md).

## <a name="next-steps"></a>Дальнейшие действия

- [Установка PowerShell для Azure Stack Hub](../operator/azure-stack-powershell-install.md).
- [Подключение к Azure Stack Hub в роли пользователя с помощью PowerShell](azure-stack-powershell-configure-user.md)
- [Resource provider API versions supported by profiles in Azure Stack](azure-stack-profiles-azure-resource-manager-versions.md) (Версии API поставщика ресурсов, поддерживаемые профилями в Azure Stack).
