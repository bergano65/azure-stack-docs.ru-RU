---
title: Хранилище Azure Stack Hub. Отличия и рекомендации
description: Сведения о различиях между хранилищем Azure Stack Hub и службой хранилища Azure, а также рекомендации по развертыванию Azure Stack Hub.
author: mattbriggs
ms.topic: conceptual
ms.date: 1/22/2020
ms.author: mabrigg
ms.reviwer: xiaofmao
ms.lastreviewed: 01/30/2020
ms.openlocfilehash: 864421f543e02da39dcbd3bf2972fe3a0782676f
ms.sourcegitcommit: 17be49181c8ec55e01d7a55c441afe169627d268
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/21/2020
ms.locfileid: "80069392"
---
# <a name="azure-stack-hub-storage-differences-and-considerations"></a>Хранилище Azure Stack Hub. Отличия и рекомендации

Хранилище Azure Stack Hub — это набор облачных служб хранилища в Microsoft Azure Stack Hub. Хранилище Azure Stack Hub предоставляет согласованные с Azure функции управления большими двоичными объектами, таблицами, очередями и учетными записями.

В этой статье перечислены известные различия между хранилищем Azure Stack Hub и службой хранилища Azure. Кроме того, статья содержит рекомендации по развертыванию Azure Stack Hub. См. дополнительные сведения о [ключевых различиях](azure-stack-considerations.md) между глобальной средой Azure и Azure Stack Hub.

## <a name="cheat-sheet-storage-differences"></a>Краткий справочник. Различия хранилищ

| Компонент | Azure (глобальная) | Azure Stack Hub |
| --- | --- | --- |
|Хранилище файлов|Поддерживаются облачные общие папки с файлами SMB|Еще не поддерживается
|Шифрование службы хранилища Azure для неактивных данных|256-битное шифрование AES. Поддерживается шифрование с использованием управляемых пользователем ключей в Key Vault.|128-битное шифрование AES BitLocker. Не поддерживается шифрование с использованием управляемых пользователем ключей.
|Тип учетной записи хранения|Учетные записи хранения общего назначения версий 1 и 2 и учетные записи хранения BLOB-объектов.|Только общего назначения версии 1.
|Варианты репликации|Локально избыточное хранилище, геоизбыточное хранилище, геоизбыточное хранилище с доступом для чтения и хранилище, избыточное между зонами.|Локально избыточное хранилище.
|Хранилище уровня "Премиум"|Высокопроизводительное хранилище с низким уровнем задержки. Поддерживают только страничные BLOB-объекты в учетных записях хранения уровня "Премиум".|Может быть подготовлено, но не имеет ограничений производительности или гарантий. Не блокируется при использовании блочных BLOB-объектов, добавочных BLOB-объектов, таблиц и очередей в учетных записях хранения уровня "Премиум".
|Управляемые диски|Поддерживается уровень "Премиум" и "Стандартный"|Поддерживается при использовании версии 1808 или более поздней версии.
|Моментальные снимки управляемых дисков|Общедоступная версия|Поддерживается.
|Добавочные моментальные снимки управляемых дисков|Общедоступная версия|Пока не поддерживается.
|Моментальные снимки управляемого диска для работающей виртуальной машины|Общедоступная версия|Пока не поддерживается.
|Имя большого двоичного объекта|1024 символов (2048 байт)|880 символов (1760 байт)
|Максимальный размер блочного BLOB-объекта|4,75 ТБ (100 МБ х 50 000 блоков)|4,75 ТБ (100 МБ x 50 000 блоков) для обновления 1802 или более новой версии. 50 000 x 4 МБ (примерно 195 ГБ) для предыдущих версий.
|Копирование моментального снимка страничного BLOB-объекта|Поддерживается архивация неуправляемых дисков виртуальных машин Azure, подключенных к запущенной виртуальной машине|Поддерживается в [API как асинхронная операция](azure-stack-acs-differences.md).
|Копирование добавочных моментальных снимков страничного BLOB-объекта|Поддерживаются страничные BLOB-объекты Azure уровня "Премиум" и "Стандартный"|Пока не поддерживается.
|Выставление счетов за страничные BLOB-объекты|Плата начисляется за уникальные страницы, независимо от того, где они находятся: в большом двоичном объекте или в моментальном снимке. Дополнительная плата за моментальные снимки, связанные с большим двоичным объектом, не взимается, пока большой двоичный объект, на котором они основаны, не будет обновлен.|Плата начисляется за базовый большой двоичный объект и связанные моментальные снимки. Дополнительная плата взимается за каждый отдельный моментальный снимок.
|Уровни хранилища BLOB-объектов|"Горячий", "холодный" и архивный уровни хранилища.|Пока не поддерживается.
|Обратимое удаление для хранилища BLOB-объектов|Общедоступная версия|Пока не поддерживается.
|Максимальный размер страничного BLOB-объекта|8 ТБ|1 TБ
|Размер страницы страничного BLOB-объекта|512 байт|4 КБ
|Ключ секции таблицы и размер ключа строки|1024 символов (2048 байт)|400 символов (800 байт)
|Моментальный снимок большого двоичного объекта|Максимальное число моментальных снимков одного большого двоичного объекта неограниченно.|Максимальное число моментальных снимков одного большого двоичного объекта — 1000.
|Аутентификация Azure AD для хранилища|В предварительной версии|Пока не поддерживается.
|Неизменяемые BLOB-объекты|Общедоступная версия|Пока не поддерживается.
|Правила брандмауэра и виртуальной сети для хранилища|Общедоступная версия|Пока не поддерживается.|

Кроме того, есть различия в метриках хранилища:

* Данные транзакций в метриках хранилища не различают внутреннюю или внешнюю пропускную способность сети.
* Данные транзакции в метриках хранилища не включают доступ виртуальных машин к подключенным дискам.

## <a name="api-version"></a>Версия API

Служба хранилища Azure Stack Hub поддерживает следующие версии:

API-интерфейсы служб хранилища Azure.

Обновление 1811 или более новые версии:

- [2017-11-09](https://docs.microsoft.com/rest/api/storageservices/version-2017-11-09)
- [2017-07-29](https://docs.microsoft.com/rest/api/storageservices/version-2017-07-29)
- [2017-04-17](https://docs.microsoft.com/rest/api/storageservices/version-2017-04-17);
- [2016-05-31](https://docs.microsoft.com/rest/api/storageservices/version-2016-05-31);
- [2015-12-11](https://docs.microsoft.com/rest/api/storageservices/version-2015-12-11);
- [2015-07-08](https://docs.microsoft.com/rest/api/storageservices/version-2015-07-08);
- [2015-04-05](https://docs.microsoft.com/rest/api/storageservices/version-2015-04-05).

Предыдущие версии:

- [2017-04-17](https://docs.microsoft.com/rest/api/storageservices/version-2017-04-17);
- [2016-05-31](https://docs.microsoft.com/rest/api/storageservices/version-2016-05-31);
- [2015-12-11](https://docs.microsoft.com/rest/api/storageservices/version-2015-12-11);
- [2015-07-08](https://docs.microsoft.com/rest/api/storageservices/version-2015-07-08);
- [2015-04-05](https://docs.microsoft.com/rest/api/storageservices/version-2015-04-05).

API управления службами хранилища Azure:

Обновление 1811 или более новые версии:

- [01.10.2017](https://docs.microsoft.com/rest/api/storagerp/?redirectedfrom=MSDN)
- [01.06.2017](https://docs.microsoft.com/rest/api/storagerp/?redirectedfrom=MSDN)
- [01.12.2016](https://docs.microsoft.com/rest/api/storagerp/?redirectedfrom=MSDN)
- [01.05.2016](https://docs.microsoft.com/rest/api/storagerp/?redirectedfrom=MSDN)
- [2016-01-01](https://docs.microsoft.com/rest/api/storagerp/?redirectedfrom=MSDN).
- [2015-06-15](https://docs.microsoft.com/rest/api/storagerp/?redirectedfrom=MSDN);
- [2015-05-01-preview](https://docs.microsoft.com/rest/api/storagerp/?redirectedfrom=MSDN);

Предыдущие версии:

- [2016-01-01](https://docs.microsoft.com/rest/api/storagerp/?redirectedfrom=MSDN).
- [2015-06-15](https://docs.microsoft.com/rest/api/storagerp/?redirectedfrom=MSDN);
- [2015-05-01-preview](https://docs.microsoft.com/rest/api/storagerp/?redirectedfrom=MSDN);

## <a name="powershell-version"></a>Версия PowerShell

Для модуля хранилища PowerShell необходимо знать версию, совместимую с REST API. 

| Модуль | Поддерживаемая версия | Использование |
|----------------|-------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Azure.Storage; | [4.5.0](https://www.powershellgallery.com/packages/Azure.Storage/4.5.0) | Управляет BLOB-объектами, очередями, таблицами в учетных записях хранения Azure Stack Hub |
| AzureRM.Storage | [5.0.4](https://www.powershellgallery.com/packages/AzureRM.Storage/5.0.4) | Создает учетную запись в Azure Stack Hub и управляет ей |


Дополнительные сведения о поддерживаемых клиентских библиотеках службы хранилища Azure Stack Hub см. в статье: [Начало работы со средствами разработки хранилища Azure Stack Hub](azure-stack-storage-dev.md).

## <a name="next-steps"></a>Дальнейшие действия

* [Начало работы со средствами разработки хранилища Azure Stack Hub](azure-stack-storage-dev.md)
* [Использование средств передачи данных в хранилище Azure Stack Hub](azure-stack-storage-transfer.md)
* [Общие сведения о хранилище Azure Stack Hub](azure-stack-storage-overview.md)
